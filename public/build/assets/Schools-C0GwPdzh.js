import{r as d,j as z,q as M,c as a,a as c,b as e,p as m,s as S,D as A,n as h,F as f,y as v,u as x,o,t as g,w as b,l as _}from"./app-B6qV5A7i.js";import{_ as N}from"./Header-DbOVMOdF.js";import{_ as V}from"./Footer-BiXo2ehh.js";const B={class:"min-h-screen bg-white antialiased"},L={class:"mx-auto max-w-7xl px-3 sm:px-4 lg:px-8 py-10"},j={class:"mb-6 space-y-4"},D={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},$={class:"w-full sm:w-80 relative"},q={class:"flex flex-wrap gap-2 text-sm"},F=["onClick"],R={class:"overflow-x-auto rounded-xl border border-gray-200 bg-white shadow-sm"},U={class:"min-w-full divide-y divide-gray-200 text-sm"},W={class:"divide-y divide-gray-100"},X={class:"px-4 py-2 text-gray-900 whitespace-nowrap"},E={class:"px-4 py-2 text-gray-800"},H=["title"],T={class:"px-4 py-2"},G={class:"flex items-center justify-end gap-2"},I={key:0},J={key:1},K={key:0,class:"mt-12 text-center text-gray-600"},Z={__name:"Schools",setup(O){const u=d(""),l=d(""),w=Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZ"),p=d([]),i=d(!1);async function C(){i.value=!0;try{const t=await(await fetch("/api/public/schools",{headers:{"X-Requested-With":"XMLHttpRequest"}})).json(),s=Array.isArray(t)?t.map(r=>({id:r.school_number,name:r.school_name||String(r.school_number)})):[];s.sort((r,k)=>r.name.localeCompare(k.name)),p.value=s}catch{p.value=[]}finally{i.value=!1}}z(()=>{C()});const y=M(()=>{const n=(u.value||"").toLowerCase();let t=p.value;return l.value&&(t=t.filter(s=>(s.name||"").toUpperCase().startsWith(l.value))),n&&(t=t.filter(s=>(s.name||"").toLowerCase().includes(n))),t});return(n,t)=>(o(),a("div",B,[c(N),e("section",L,[e("div",j,[e("div",D,[t[3]||(t[3]=e("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-900"},"Schools",-1)),e("div",$,[S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),type:"text",placeholder:"Search schools...",class:"w-full rounded-lg border border-gray-300 bg-white py-2.5 pl-10 pr-3 text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-green-600"},null,512),[[A,u.value,void 0,{trim:!0}]]),t[2]||(t[2]=e("svg",{class:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M15.5 14h-.79l-.28-.27a6.471 6.471 0 0 0 1.57-4.23C16 6.01 13.31 3.32 10 3.32S4 6.01 4 9.5 6.69 15.68 10 15.68c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.49-1.49-5-5zM10 13.68A4.18 4.18 0 0 1 5.82 9.5 4.18 4.18 0 0 1 10 5.32 4.18 4.18 0 0 1 14.18 9.5 4.18 4.18 0 0 1 10 13.68z"})],-1))])]),e("div",q,[e("button",{type:"button",onClick:t[1]||(t[1]=s=>l.value=""),class:h(["rounded-md px-2.5 py-1",l.value===""?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},"All",2),(o(!0),a(f,null,v(x(w),s=>(o(),a("button",{key:s,type:"button",onClick:r=>l.value=s,class:h(["rounded-md px-2.5 py-1",l.value===s?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},g(s),11,F))),128))])]),e("div",R,[e("table",U,[t[8]||(t[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left font-semibold text-gray-700"},"Center No"),e("th",{class:"px-4 py-2 text-left font-semibold text-gray-700"},"School Name"),e("th",{class:"px-4 py-2 text-right font-semibold text-gray-700"},"Actions")])],-1)),e("tbody",W,[(o(!0),a(f,null,v(y.value,s=>(o(),a("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",X,g(s.id),1),e("td",E,[e("span",{class:"truncate inline-block max-w-[32rem]",title:s.name},g(s.name),9,H)]),e("td",T,[e("div",G,[c(x(_),{href:`/results/schools/${s.id}`,class:"inline-flex items-center justify-center h-8 w-8 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100","aria-label":"View"},{default:b(()=>[...t[4]||(t[4]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10zm0-8a3 3 0 1 0 .001 6.001A3 3 0 0 0 12 9z"})],-1),e("span",{class:"sr-only"},"View",-1)])]),_:1},8,["href"]),c(x(_),{href:`/results/schools/${s.id}/details`,class:"inline-flex items-center justify-center h-8 w-8 rounded-md bg-green-600 text-white hover:bg-green-700","aria-label":"Details"},{default:b(()=>[...t[5]||(t[5]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M11 9h2v2h-2V9zm0 4h2v6h-2v-6z"}),e("path",{d:"M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm0 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"})],-1),e("span",{class:"sr-only"},"Details",-1)])]),_:1},8,["href"])])])]))),128)),!i.value&&y.value.length===0?(o(),a("tr",I,[...t[6]||(t[6]=[e("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-600"},"No schools found.",-1)])])):m("",!0),i.value?(o(),a("tr",J,[...t[7]||(t[7]=[e("td",{colspan:"3",class:"px-4 py-6 text-center text-gray-600"},"Loading...",-1)])])):m("",!0)])])]),y.value.length===0?(o(),a("div",K,"No schools found.")):m("",!0)]),c(V)]))}};export{Z as default};
