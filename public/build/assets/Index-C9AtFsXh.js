import{f as N,r as x,h as S,x as T,c as a,a as k,u as b,m as O,w as A,b as t,i as v,o as d,t as o,e as I,z as h,F as p,k as y,B as w,n as C}from"./app-C42XF4l0.js";import{_ as M}from"./EmasLayout-CT7diuvK.js";import"./DropdownLink-C3nCCoGM.js";const L={class:"space-y-6"},D={key:0,class:"rounded-lg border border-emerald-200 bg-emerald-50 p-4 shadow-md"},G={class:"flex items-center gap-3"},V={class:"text-emerald-800 font-medium"},H={class:"rounded-lg bg-gradient-to-r from-emerald-600 to-teal-600 p-6 text-white shadow-lg"},U={class:"text-center"},j={class:"text-xl font-bold text-yellow-300 mt-2"},F={class:"flex items-center justify-between gap-4"},B=["disabled"],P={key:0,class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},W={key:1,class:"h-5 w-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},X={key:2},q={key:3},z={class:"rounded-lg bg-white p-6 shadow-md"},K={class:"grid gap-4 sm:grid-cols-3"},$=["value"],J=["disabled"],Q=["value"],Y={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},Z={class:"rounded-lg border-2 border-emerald-200 bg-white p-4 shadow-md"},tt={class:"mt-2 text-3xl font-bold text-emerald-700"},et={class:"rounded-lg border-2 border-blue-200 bg-white p-4 shadow-md"},st={class:"mt-2 text-3xl font-bold text-blue-700"},ot={class:"rounded-lg border-2 border-purple-200 bg-white p-4 shadow-md"},lt={class:"mt-2 text-3xl font-bold text-purple-700"},at={class:"rounded-lg border-2 border-orange-200 bg-white p-4 shadow-md"},dt={class:"mt-2 text-3xl font-bold text-orange-700"},nt={class:"rounded-lg border-2 border-teal-200 bg-white p-6 shadow-md"},rt={class:"grid gap-4 sm:grid-cols-3"},it={class:"text-center"},ut={class:"mt-2 flex justify-center gap-8"},xt={class:"text-2xl font-bold text-pink-600"},mt={class:"text-2xl font-bold text-blue-600"},ct={class:"text-center"},pt={class:"mt-2 text-2xl font-bold text-emerald-600"},gt={class:"text-center"},ft={class:"mt-2 text-2xl font-bold text-teal-700"},bt={class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-md"},vt={key:0,class:"p-4 text-center"},ht={key:1,class:"overflow-x-auto"},yt={class:"min-w-full divide-y divide-gray-200"},wt={class:"divide-y divide-gray-200 bg-white"},Et={class:"whitespace-nowrap px-4 py-3 text-sm text-gray-900"},_t={class:"whitespace-nowrap px-4 py-3 text-sm font-medium text-gray-900"},St={class:"whitespace-nowrap px-4 py-3 text-sm text-gray-700"},Tt={class:"whitespace-nowrap px-4 py-3 text-sm text-gray-700"},kt={class:"px-4 py-3 text-sm font-medium text-gray-900"},Rt={class:"whitespace-nowrap px-4 py-3"},Nt={class:"whitespace-nowrap px-4 py-3 text-right text-sm font-semibold text-gray-900"},Ot={class:"whitespace-nowrap px-4 py-3 text-right text-sm font-semibold text-gray-900"},At={class:"whitespace-nowrap px-4 py-3 text-right text-sm font-bold text-blue-600"},It={key:0},Ct={key:0,class:"bg-gray-50 font-bold"},Mt={class:"px-4 py-3 text-right text-sm text-gray-900"},Lt={class:"px-4 py-3 text-right text-sm text-gray-900"},Dt={class:"px-4 py-3 text-right text-sm text-blue-700"},Ut={__name:"Index",props:{schools:Array,stats:Object,filters:Object},setup(l){const c=l,E=N(),r=x(c.filters.selected_region||""),i=x(c.filters.selected_council||""),u=x(c.filters.selected_ownership||""),_=x(c.filters.councils||[]),g=x(!1),m=x(!1),R=()=>{confirm("Sync all EMAS Centers to Schools Registration?")&&(m.value=!0,T.post(route("emas.schools.sync-centers"),{},{preserveScroll:!0,onFinish:()=>{m.value=!1}}))};return S([r,i,u],async()=>{g.value=!0;try{const n=new URLSearchParams;r.value&&n.append("region",r.value),i.value&&n.append("council",i.value),u.value&&n.append("ownership",u.value);const e=await fetch(route("emas.schools.data")+"?"+n.toString(),{headers:{"X-Requested-With":"XMLHttpRequest"}});if(e.ok){const s=await e.json();T.reload({only:["schools","stats","filters"],data:{region:r.value,council:i.value,ownership:u.value}})}}catch(n){console.error("Failed to load data:",n)}finally{g.value=!1}}),S(r,async n=>{if(i.value="",n){const e=new URLSearchParams({region:n}),s=await fetch(route("emas.schools.data")+"?"+e.toString(),{headers:{"X-Requested-With":"XMLHttpRequest"}});if(s.ok){const f=await s.json();_.value=f.councils}}}),(n,e)=>(d(),a(p,null,[k(b(O),{title:"Schools Registration"}),k(M,null,{default:A(()=>[t("div",L,[b(E).props.flash?.success?(d(),a("div",D,[t("div",G,[e[3]||(e[3]=t("svg",{class:"h-6 w-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("p",V,o(b(E).props.flash.success),1)])])):v("",!0),t("div",H,[t("div",U,[e[4]||(e[4]=t("h1",{class:"text-2xl font-bold"},"THE PRESIDENT'S OFFICE",-1)),e[5]||(e[5]=t("h2",{class:"text-lg font-semibold"},"REGIONAL ADMINISTRATION AND LOCAL GOVERNMENT",-1)),t("h3",j,o(r.value||"ALL REGIONS"),1),e[6]||(e[6]=t("p",{class:"mt-1 text-emerald-100"},"REGIONAL FORM TWO MOCK EXAMINATION RESULTS, AUGUST, 2025",-1)),e[7]||(e[7]=t("p",{class:"mt-2 text-lg font-semibold border-t border-emerald-400 pt-2"},"SCHOOLS REGISTRATION",-1))])]),t("div",F,[e[10]||(e[10]=t("div",{class:"flex items-center gap-2 rounded-lg border border-blue-200 bg-blue-50 px-4 py-2"},[t("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("p",{class:"text-sm text-blue-800"},[t("span",{class:"font-semibold"},"Auto-Sync Enabled:"),I(" EMAS Centers are automatically synced to schools ")])],-1)),t("button",{onClick:R,disabled:m.value,class:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-md transition-all"},[m.value?(d(),a("svg",W,[...e[9]||(e[9]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(d(),a("svg",P,[...e[8]||(e[8]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])),m.value?(d(),a("span",q,"Syncing...")):(d(),a("span",X,"Sync Now"))],8,B)]),t("div",z,[e[17]||(e[17]=t("h3",{class:"mb-4 text-lg font-semibold text-gray-800"},"Filter Schools",-1)),t("div",K,[t("div",null,[e[12]||(e[12]=t("label",{class:"mb-2 block text-sm font-medium text-gray-700"},"Region (Mkoa)",-1)),h(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500"},[e[11]||(e[11]=t("option",{value:""},"All Regions",-1)),(d(!0),a(p,null,y(l.filters.regions,s=>(d(),a("option",{key:s,value:s},o(s),9,$))),128))],512),[[w,r.value]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"mb-2 block text-sm font-medium text-gray-700"},"Council (Wilaya)",-1)),h(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.value=s),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500",disabled:!r.value},[e[13]||(e[13]=t("option",{value:""},"All Councils",-1)),(d(!0),a(p,null,y(_.value,s=>(d(),a("option",{key:s,value:s},o(s),9,Q))),128))],8,J),[[w,i.value]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"mb-2 block text-sm font-medium text-gray-700"},"Ownership",-1)),h(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>u.value=s),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500"},[...e[15]||(e[15]=[t("option",{value:""},"All Types",-1),t("option",{value:"GOVERNMENT"},"Government",-1),t("option",{value:"PRIVATE"},"Private",-1)])],512),[[w,u.value]])])])]),t("div",Y,[t("div",Z,[e[18]||(e[18]=t("div",{class:"text-sm font-medium text-gray-600"},"NUMBER OF SCHOOLS IN DISTRICT",-1)),t("div",tt,o(l.stats.total_schools),1)]),t("div",et,[e[19]||(e[19]=t("div",{class:"text-sm font-medium text-gray-600"},"GOVT SCHOOLS",-1)),t("div",st,o(l.stats.govt_schools),1)]),t("div",ot,[e[20]||(e[20]=t("div",{class:"text-sm font-medium text-gray-600"},"PRIVATE SCHOOLS",-1)),t("div",lt,o(l.stats.private_schools),1)]),t("div",at,[e[21]||(e[21]=t("div",{class:"text-sm font-medium text-gray-600"},"TOTAL",-1)),t("div",dt,o(l.stats.total_schools),1)])]),t("div",nt,[e[27]||(e[27]=t("h3",{class:"mb-4 text-lg font-semibold text-gray-800"},"TOTAL CANDIDATES REGISTERED IN DISTRICT",-1)),t("div",rt,[t("div",it,[e[24]||(e[24]=t("div",{class:"text-sm font-medium text-gray-600"},"SEX",-1)),t("div",ut,[t("div",null,[e[22]||(e[22]=t("div",{class:"text-xs text-gray-500"},"F",-1)),t("div",xt,o(l.stats.total_female),1)]),t("div",null,[e[23]||(e[23]=t("div",{class:"text-xs text-gray-500"},"M",-1)),t("div",mt,o(l.stats.total_male),1)])])]),t("div",ct,[e[25]||(e[25]=t("div",{class:"text-sm font-medium text-gray-600"},"GOVERNMENT",-1)),t("div",pt,o(l.stats.total_female+l.stats.total_male),1)]),t("div",gt,[e[26]||(e[26]=t("div",{class:"text-sm font-medium text-gray-600"},"TOTAL",-1)),t("div",ft,o(l.stats.total_students),1)])])]),t("div",bt,[g.value?(d(),a("div",vt,[...e[28]||(e[28]=[t("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-emerald-600 border-r-transparent"},null,-1),t("p",{class:"mt-2 text-sm text-gray-600"},"Loading...",-1)])])):(d(),a("div",ht,[t("table",yt,[e[31]||(e[31]=t("thead",{class:"bg-emerald-600 text-white"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase"},"S/NO."),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase"},"COUNCIL"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase"},"WARD"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase"},"CENTRE NUMBER"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase"},"CENTRE NAME"),t("th",{class:"px-4 py-3 text-left text-xs font-bold uppercase"},"OWNERSHIP"),t("th",{class:"px-4 py-3 text-right text-xs font-bold uppercase"},"FEMALE"),t("th",{class:"px-4 py-3 text-right text-xs font-bold uppercase"},"MALE"),t("th",{class:"px-4 py-3 text-right text-xs font-bold uppercase"},"STUDENTS REGISTERED")])],-1)),t("tbody",wt,[(d(!0),a(p,null,y(l.schools,(s,f)=>(d(),a("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Et,o(f+1),1),t("td",_t,o(s.council),1),t("td",St,o(s.ward||"â€”"),1),t("td",Tt,o(s.centre_number),1),t("td",kt,o(s.centre_name),1),t("td",Rt,[t("span",{class:C(["inline-flex rounded-full px-2 py-1 text-xs font-semibold",s.ownership==="GOVERNMENT"?"bg-emerald-100 text-emerald-800":"bg-purple-100 text-purple-800"])},o(s.ownership),3)]),t("td",Nt,o(s.female_students),1),t("td",Ot,o(s.male_students),1),t("td",At,o(s.total_students),1)]))),128)),l.schools.length===0?(d(),a("tr",It,[...e[29]||(e[29]=[t("td",{colspan:"9",class:"px-4 py-8 text-center text-sm text-gray-500"}," No schools found. Try adjusting your filters. ",-1)])])):v("",!0)]),l.schools.length>0?(d(),a("tfoot",Ct,[t("tr",null,[e[30]||(e[30]=t("td",{colspan:"6",class:"px-4 py-3 text-right text-sm uppercase text-gray-900"},"TOTAL CANDIDATES REGISTERED IN DISTRICT",-1)),t("td",Mt,o(l.stats.total_female),1),t("td",Lt,o(l.stats.total_male),1),t("td",Dt,o(l.stats.total_students),1)])])):v("",!0)])]))])])]),_:1})],64))}};export{Ut as default};
