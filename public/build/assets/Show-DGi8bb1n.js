import{r as u,q as c,c as r,a as y,u as _,h as A,w as g,b as e,p as m,n as w,o as l,s as N,I as B,D as T,F as x,y as f,t as o,z as $,l as S,e as F,k as M}from"./app-CNtTXHrN.js";import{_ as O}from"./AuthenticatedLayout-2X-NjQgu.js";const D={class:"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between"},I={class:"text-xl font-semibold leading-tight text-gray-800"},z={class:"mt-1 text-sm text-gray-600"},E={class:"mt-1 text-xs text-gray-500"},K={class:"flex items-center gap-2"},R={class:"space-y-4"},U={class:"border-b"},L={class:"-mb-px flex gap-6 text-sm"},P={key:0,class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},Y={class:"grid w-full grid-cols-1 gap-2 sm:grid-cols-2"},G=["value"],H={key:1,class:"overflow-hidden rounded-xl border border-gray-100 bg-white shadow-sm"},J={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200 text-sm"},W={class:"divide-y divide-gray-100"},X={class:"px-4 py-3 font-medium text-gray-900"},Z={class:"px-4 py-3 text-gray-800"},ee={class:"px-4 py-3 text-gray-700"},te={class:"px-4 py-3"},se={class:"flex max-w-[360px] flex-wrap gap-1"},ae={key:0,class:"text-xs text-gray-500"},re={key:0},le={key:2,class:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3"},oe={class:"flex items-start justify-between"},de={class:"text-base font-semibold text-gray-900"},ne={class:"text-xs text-gray-600"},ie={key:0,class:"col-span-full rounded-lg border border-dashed p-6 text-center text-sm text-gray-500"},me={__name:"Show",props:{teacher:{type:Object,required:!0},students:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({q:"",subject_id:null})},exams:{type:Array,default:()=>[]}},setup(d){const n=d,h=u(n.filters.q||""),p=u(n.filters.subject_id||""),q=c(()=>(n.teacher.subjects||[]).map(a=>({id:a.id,name:a.name})));function k(){M.get(route("teachers.show",{id:n.teacher.id}),{q:h.value||"",subject_id:p.value||""},{preserveState:!0,replace:!0})}const b=c(()=>n.students),V=["students","results","more"],i=u("students");function v(a){V.includes(a)&&(i.value=a)}c(()=>(n.teacher.subjects||[]).map(a=>a.id));const j=u("");return u(""),u(""),c(()=>Array.from(new Set((n.exams||[]).map(a=>a.year))).sort((a,s)=>s-a)),c(()=>n.teacher.classes||[]),c(()=>(n.exams||[]).filter(a=>!j.value||a.year===Number(j.value))),u({loaded:!1,total:0,pass:0,perSubject:[]}),(a,s)=>(l(),r(x,null,[y(_(A),{title:`Teacher • ${d.teacher.name}`},null,8,["title"]),y(O,null,{header:g(()=>[e("div",D,[e("div",null,[e("h2",I,o(d.teacher.name),1),e("div",z,"Check No: "+o(d.teacher.check_no)+" · Phone: "+o(d.teacher.phone||"—")+" · Email: "+o(d.teacher.email||"—"),1),e("div",E,"Classes: "+o((d.teacher.classes||[]).map(t=>t.name).join(", ")||"—"),1)]),e("div",K,[y(_(S),{href:a.route("teachers.index"),class:"text-sm text-emerald-700 hover:text-emerald-900"},{default:g(()=>[...s[5]||(s[5]=[F("← Back to teachers",-1)])]),_:1},8,["href"])])])]),default:g(()=>[e("div",R,[e("div",U,[e("nav",L,[e("button",{onClick:s[0]||(s[0]=t=>v("students")),class:w([i.value==="students"?"border-b-2 border-emerald-600 font-medium text-emerald-700":"text-gray-500 hover:text-gray-700","px-1 py-2"])},"Students",2),e("button",{onClick:s[1]||(s[1]=t=>v("results")),class:w([i.value==="results"?"border-b-2 border-emerald-600 font-medium text-emerald-700":"text-gray-500 hover:text-gray-700","px-1 py-2"])},"Results",2),e("button",{onClick:s[2]||(s[2]=t=>v("more")),class:w([i.value==="more"?"border-b-2 border-emerald-600 font-medium text-emerald-700":"text-gray-500 hover:text-gray-700","px-1 py-2"])},"More",2)])]),i.value==="students"?(l(),r("div",P,[e("div",Y,[N(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>h.value=t),onKeyup:B(k,["enter"]),type:"text",placeholder:"Search reg no / name / class",class:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-emerald-500 focus:ring-emerald-500"},null,544),[[T,h.value]]),N(e("select",{"onUpdate:modelValue":s[4]||(s[4]=t=>p.value=t),class:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-emerald-500 focus:ring-emerald-500"},[s[6]||(s[6]=e("option",{value:""},"All subjects",-1)),(l(!0),r(x,null,f(q.value,t=>(l(),r("option",{key:t.id,value:t.id},o(t.name),9,G))),128))],512),[[$,p.value]])]),e("div",{class:"flex shrink-0 items-center gap-2"},[e("button",{onClick:k,class:"rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50"},"Apply")])])):m("",!0),i.value==="students"?(l(),r("div",H,[e("div",J,[e("table",Q,[s[8]||(s[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left font-semibold text-gray-700"},"Reg No"),e("th",{class:"px-4 py-3 text-left font-semibold text-gray-700"},"Full name"),e("th",{class:"px-4 py-3 text-left font-semibold text-gray-700"},"Class"),e("th",{class:"px-4 py-3 text-left font-semibold text-gray-700"},"Subjects")])],-1)),e("tbody",W,[(l(!0),r(x,null,f(b.value,t=>(l(),r("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",X,o(t.reg_no),1),e("td",Z,o(t.name),1),e("td",ee,o(t.class_name),1),e("td",te,[e("div",se,[(l(!0),r(x,null,f(t.subjects||[],C=>(l(),r("span",{key:C.id,class:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-700"},o(C.name),1))),128)),!t.subjects||t.subjects.length===0?(l(),r("span",ae,"—")):m("",!0)])])]))),128)),!b.value||b.value.length===0?(l(),r("tr",re,[...s[7]||(s[7]=[e("td",{colspan:"4",class:"px-4 py-8 text-center text-sm text-gray-500"},"No students match your filters.",-1)])])):m("",!0)])])])])):m("",!0),i.value==="results"?(l(),r("div",le,[(l(!0),r(x,null,f(d.exams,t=>(l(),r("div",{key:t.id,class:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm"},[e("div",oe,[e("div",null,[e("div",de,o(t.name),1),e("div",ne,o(t.type)+" · Year "+o(t.year)+" · Term "+o(t.term),1)]),y(_(S),{href:a.route("teachers.exam",{id:d.teacher.id,examId:t.id}),class:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-emerald-50 text-emerald-700 ring-1 ring-inset ring-emerald-200 hover:bg-emerald-100","aria-label":"Open"},{default:g(()=>[...s[9]||(s[9]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5l7 7-7 7"})],-1)])]),_:1},8,["href"])])]))),128)),!d.exams||d.exams.length===0?(l(),r("div",ie,"No exams found for these classes.")):m("",!0)])):m("",!0)])]),_:1})],64))}};export{me as default};
