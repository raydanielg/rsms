import{f as c,r as n,v,c as g,a as i,u as f,m as y,w as p,b as e,e as b,t as r,z as h,G as w,F as _,o as k}from"./app-BoWaoUwb.js";import{_ as E}from"./AuthenticatedLayout-CQFJTYU6.js";import S from"./DeleteUserForm-DTNhSEi1.js";import C from"./UpdatePasswordForm-B4R_EWRG.js";import F from"./UpdateProfileInformationForm-Dodp9umU.js";import"./DropdownLink-v00n1gGZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-DzEN3TXj.js";import"./PrimaryButton-dgZVw1AZ.js";const T={class:"py-8"},V={class:"mx-auto max-w-7xl space-y-6 sm:px-6 lg:px-8"},$={class:"rounded-xl border border-emerald-100 bg-gradient-to-br from-emerald-50 to-white p-5 shadow-sm"},B={class:"mb-3 flex items-center justify-between"},N={class:"grid gap-4 sm:grid-cols-3"},P={class:"mt-1 text-base font-semibold text-gray-900"},Y={class:"mt-1 text-sm text-gray-800"},M={class:"mt-1 text-base font-semibold text-gray-900"},O={class:"mt-1 text-sm text-gray-800"},j={class:"mt-2 grid grid-cols-2 gap-2 text-xs"},q={class:"mt-0.5 text-gray-800"},A=["title"],D={class:"mt-1 inline-flex items-center gap-2"},I={class:"inline-flex items-center rounded-full bg-emerald-50 px-2 py-0.5 text-sm font-semibold text-emerald-700 ring-1 ring-inset ring-emerald-200"},R=["disabled"],X={id:"edit-profile-form",class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm sm:p-8"},z={class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm sm:p-8"},L={class:"rounded-xl border border-rose-100 bg-white p-4 shadow-sm sm:rounded-lg sm:p-8"},te={__name:"Edit",props:{mustVerifyEmail:{type:Boolean},status:{type:String}},setup(m){const a=c(),o=n(new Date().getFullYear()),d=n(!1),l=n({name:a.props?.auth?.user?.school_name||"",code:a.props?.auth?.user?.school_code||"",address:a.props?.auth?.user?.school_address||"",phone:a.props?.auth?.user?.school_phone||""});v(()=>{const s=a.props?.school_year;s&&(o.value=s)});async function x(){if(!o.value||o.value<2e3||o.value>2100){window.__toast&&window.__toast("error","Enter a valid year (2000-2100)");return}d.value=!0;try{const s=document.head.querySelector('meta[name="csrf-token"]').getAttribute("content");if(!(await fetch(route("profile.setYear"),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":s},body:JSON.stringify({year:parseInt(o.value,10)})})).ok)throw new Error("Failed");window.__toast&&window.__toast("success","School year updated"),setTimeout(()=>window.location.reload(),400)}catch{window.__toast&&window.__toast("error","Failed to update year")}finally{d.value=!1}}return(s,t)=>(k(),g(_,null,[i(f(y),{title:"Profile"}),i(E,null,{header:p(()=>[...t[2]||(t[2]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Profile",-1)])]),default:p(()=>[e("div",T,[e("div",V,[e("div",$,[e("div",B,[t[4]||(t[4]=e("div",{class:"text-sm font-semibold text-emerald-800"},"Account Overview",-1)),e("button",{onClick:t[0]||(t[0]=u=>s.document.getElementById("edit-profile-form")?.scrollIntoView({behavior:"smooth",block:"start"})),class:"inline-flex items-center gap-1 rounded-md bg-emerald-600 px-3 py-1.5 text-sm font-semibold text-white hover:bg-emerald-700"},[...t[3]||(t[3]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 3.487a2.1 2.1 0 113 3L8.25 18.1 4.5 19.5l1.4-3.75 10.962-12.263z"})],-1),b(" Edit profile ",-1)])])]),e("div",N,[e("div",null,[t[5]||(t[5]=e("div",{class:"text-xs text-gray-500"},"Full name",-1)),e("div",P,r(s.$page.props.auth.user.name),1),t[6]||(t[6]=e("div",{class:"text-xs text-gray-500"},"Email",-1)),e("div",Y,r(s.$page.props.auth.user.email),1)]),e("div",null,[t[9]||(t[9]=e("div",{class:"text-xs text-gray-500"},"School",-1)),e("div",M,r(l.value.name||"—"),1),t[10]||(t[10]=e("div",{class:"text-xs text-gray-500"},"Code",-1)),e("div",O,r(l.value.code||"—"),1),e("div",j,[e("div",null,[t[7]||(t[7]=e("div",{class:"text-gray-500"},"Phone",-1)),e("div",q,r(l.value.phone||"—"),1)]),e("div",null,[t[8]||(t[8]=e("div",{class:"text-gray-500"},"Address",-1)),e("div",{class:"mt-0.5 truncate text-gray-800",title:l.value.address},r(l.value.address||"—"),9,A)])])]),e("div",null,[t[11]||(t[11]=e("div",{class:"text-xs text-gray-500"},"Current year",-1)),e("div",D,[e("span",I,r(o.value),1),h(e("input",{type:"number",min:"2000",max:"2100","onUpdate:modelValue":t[1]||(t[1]=u=>o.value=u),class:"w-24 rounded-md border border-gray-300 px-2 py-1 text-sm focus:border-emerald-500 focus:ring-emerald-500"},null,512),[[w,o.value,void 0,{number:!0}]]),e("button",{onClick:x,disabled:d.value,class:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm font-semibold text-white hover:bg-emerald-700 disabled:opacity-60"},r(d.value?"Saving...":"Save"),9,R)]),t[12]||(t[12]=e("div",{class:"mt-2 text-xs text-gray-500"},"This sets your working school year across the app.",-1))])])]),e("div",X,[i(F,{"must-verify-email":m.mustVerifyEmail,status:m.status,class:"max-w-xl"},null,8,["must-verify-email","status"])]),e("div",z,[i(C,{class:"max-w-xl"})]),e("div",L,[i(S,{class:"max-w-xl"})])])])]),_:1})],64))}};export{te as default};
