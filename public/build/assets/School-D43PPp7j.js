import{q as M,r as n,j as I,c as l,a as d,b as t,w as p,e as h,u as w,l as _,t as r,p as u,s as E,z as L,F as k,y as S,n as A,o}from"./app-B6qV5A7i.js";import{_ as T}from"./Header-DbOVMOdF.js";import{_ as X}from"./Footer-BiXo2ehh.js";const U={class:"min-h-screen bg-white antialiased"},Y={class:"mx-auto max-w-7xl px-3 sm:px-4 lg:px-8 py-10"},F={class:"mb-6 text-sm text-gray-600","aria-label":"Breadcrumb"},G={class:"flex items-center gap-2"},K={class:"text-gray-900 font-medium truncate max-w-[12rem] sm:max-w-none"},W={class:"mb-6 flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4"},O={class:"text-2xl sm:text-3xl font-bold text-gray-900"},J={key:0,class:"mt-1 text-sm text-gray-600"},P={class:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm"},Q={class:"grid gap-4 sm:grid-cols-3"},Z=["value"],ee=["disabled"],te=["value"],se={class:"flex items-end"},ae={class:"mt-6"},le={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},oe=["onClick"],re={class:"flex items-start justify-between"},ne={class:"text-base font-semibold text-gray-900"},ie={class:"mt-0.5 text-xs text-gray-700"},de={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-4"},ue={class:"w-full max-w-lg rounded-xl bg-white shadow-xl"},me={class:"flex items-center justify-between border-b px-4 py-3"},ge={class:"text-base font-semibold text-gray-900"},ce={class:"p-4"},xe={class:"overflow-hidden rounded-lg border"},be={class:"min-w-full divide-y divide-gray-200 text-sm"},ve={class:"divide-y divide-gray-100"},fe={class:"px-3 py-2 text-gray-900"},ye={class:"px-3 py-2 text-right"},pe={key:0},he={key:1},we={key:1,class:"text-sm text-gray-500"},_e={key:2,class:"text-sm text-gray-500"},Me={__name:"School",props:{id:{type:[String,Number],required:!0}},setup(V){const m=V,N=[{id:1,name:"Green Valley Secondary School",location:"Dodoma",students:1240},{id:2,name:"Mlimani High School",location:"Dar es Salaam",students:980},{id:3,name:"Kilimanjaro Girls School",location:"Kilimanjaro",students:820},{id:4,name:"Lakeview Secondary",location:"Mwanza",students:1105},{id:5,name:"Coastal Academy",location:"Tanga",students:640},{id:6,name:"Savanna Boys High",location:"Arusha",students:770}],g=M(()=>{const a=String(m.id);return N.find(e=>String(e.id)===a)}),c=n([]),f=n(!1);async function z(){f.value=!0;try{const e=await(await fetch(`/api/public/schools/${m.id}/exams`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();c.value=Array.isArray(e)?e:[]}catch{c.value=[]}finally{f.value=!1}}const C=n(!1),i=n(null),x=n([]),y=n(!1);function B(){C.value=!1,i.value=null,x.value=[]}async function R(a){i.value=a,C.value=!0,y.value=!0;try{const s=await(await fetch(`/api/public/schools/${m.id}/exams/${a.id}/classes`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();x.value=Array.isArray(s)?s:[]}catch{x.value=[]}finally{y.value=!1}}I(()=>{z()});const b=n(""),v=n(""),$=M(()=>Array.from(new Set((c.value||[]).map(a=>a.year))).sort((a,e)=>e-a)),j=M(()=>b.value?(c.value||[]).filter(a=>a.year===Number(b.value)):c.value||[]);function q(a){const e=String(a||"").toLowerCase();return e==="midterm"?"bg-blue-100 text-blue-800 ring-1 ring-inset ring-blue-200":e==="terminal"?"bg-purple-100 text-purple-800 ring-1 ring-inset ring-purple-200":e==="mock"?"bg-amber-100 text-amber-800 ring-1 ring-inset ring-amber-200":e==="trial"?"bg-rose-100 text-rose-800 ring-1 ring-inset ring-rose-200":"bg-green-100 text-green-800 ring-1 ring-inset ring-green-200"}function H(a){const e=["border-blue-200 bg-gradient-to-br from-blue-50 to-white","border-green-200 bg-gradient-to-br from-green-50 to-white","border-amber-200 bg-gradient-to-br from-amber-50 to-white","border-purple-200 bg-gradient-to-br from-purple-50 to-white","border-rose-200 bg-gradient-to-br from-rose-50 to-white"];return e[a%e.length]}return(a,e)=>(o(),l("div",U,[d(T),t("section",Y,[t("nav",F,[t("ol",G,[t("li",null,[d(w(_),{href:"/",class:"hover:text-green-700"},{default:p(()=>[...e[2]||(e[2]=[h("Home",-1)])]),_:1})]),e[4]||(e[4]=t("li",null,"/",-1)),t("li",null,[d(w(_),{href:"/results/schools",class:"hover:text-green-700"},{default:p(()=>[...e[3]||(e[3]=[h("Results",-1)])]),_:1})]),e[5]||(e[5]=t("li",null,"/",-1)),t("li",K,r(g.value?.name||"School"),1)])]),t("div",W,[t("div",null,[t("h1",O,r(g.value?.name||"School"),1),g.value?(o(),l("p",J,r(g.value.location)+" • Students "+r(g.value.students.toLocaleString()),1)):u("",!0)])]),t("div",P,[t("div",Q,[t("div",null,[e[7]||(e[7]=t("label",{class:"mb-1 block text-xs font-medium text-gray-600"},"Year",-1)),E(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>b.value=s),class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},[e[6]||(e[6]=t("option",{value:""},"Select year",-1)),(o(!0),l(k,null,S($.value,s=>(o(),l("option",{key:s,value:s},r(s),9,Z))),128))],512),[[L,b.value]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"mb-1 block text-xs font-medium text-gray-600"},"Exam",-1)),E(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>v.value=s),disabled:!b.value,class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600 disabled:bg-gray-50 disabled:text-gray-400"},[e[8]||(e[8]=t("option",{value:""},"Select exam",-1)),(o(!0),l(k,null,S(j.value,s=>(o(),l("option",{key:s.id,value:s.id},r(s.name)+" • Term "+r(s.term),9,te))),128))],8,ee),[[L,v.value]])]),t("div",se,[d(w(_),{href:v.value?a.route("results.schools.exam",{id:m.id,examId:v.value}):"#",class:A(["inline-flex items-center rounded-md px-4 py-2 text-sm font-semibold shadow-sm transition",v.value?"bg-green-600 text-white hover:bg-green-700":"bg-gray-200 text-gray-500 cursor-not-allowed"])},{default:p(()=>[...e[10]||(e[10]=[h(" View Results ",-1)])]),_:1},8,["href","class"])])])]),t("div",ae,[e[18]||(e[18]=t("h3",{class:"mb-3 text-sm font-semibold text-gray-700"},"Available exams",-1)),t("div",le,[(o(!0),l(k,null,S(j.value,(s,D)=>(o(),l("button",{type:"button",key:s.id,class:A(["text-left rounded-xl border p-4 shadow-sm transition hover:shadow",H(D)]),onClick:ke=>R(s)},[t("div",re,[t("div",null,[t("div",ne,r(s.name),1),t("div",ie,"Year "+r(s.year)+" • Term "+r(s.term),1),t("span",{class:A(["mt-2 inline-block rounded-full px-2 py-0.5 text-xs font-medium",q(s.type)])},r(s.type),3)]),e[11]||(e[11]=t("span",{class:"inline-flex items-center justify-center h-8 w-8 rounded-md bg-white/80 text-gray-700 ring-1 ring-inset ring-gray-300"},[t("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{d:"M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10zm0-8a3 3 0 1 0 .001 6.001A3 3 0 0 0 12 9z"})])],-1))])],10,oe))),128))]),C.value?(o(),l("div",de,[t("div",ue,[t("div",me,[t("div",ge,r(i.value&&i.value.name||"Exam"),1),t("button",{onClick:B,class:"rounded-md p-1 text-gray-500 hover:bg-gray-100","aria-label":"Close"},[...e[12]||(e[12]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",ce,[e[17]||(e[17]=t("div",{class:"mb-3 text-sm text-gray-600"},"Select a class to view results.",-1)),t("div",xe,[t("table",be,[e[16]||(e[16]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left font-semibold text-gray-700"},"Class"),t("th",{class:"px-3 py-2 text-right font-semibold text-gray-700"},"Action")])],-1)),t("tbody",ve,[(o(!0),l(k,null,S(x.value,s=>(o(),l("tr",{key:s},[t("td",fe,r(s),1),t("td",ye,[d(w(_),{href:a.route("results.schools.exam",{id:m.id,examId:i.value&&i.value.id})+`?class_name=${encodeURIComponent(s)}`,class:"inline-flex items-center rounded-md bg-green-600 px-3 py-1.5 text-xs font-medium text-white hover:bg-green-700"},{default:p(()=>[...e[13]||(e[13]=[h(" View ",-1)])]),_:1},8,["href"])])]))),128)),!y.value&&x.value.length===0?(o(),l("tr",pe,[...e[14]||(e[14]=[t("td",{colspan:"2",class:"px-3 py-4 text-center text-gray-600"},"No classes assigned for this exam.",-1)])])):u("",!0),y.value?(o(),l("tr",he,[...e[15]||(e[15]=[t("td",{colspan:"2",class:"px-3 py-4 text-center text-gray-600"},"Loading classes...",-1)])])):u("",!0)])])])]),t("div",{class:"flex justify-end gap-2 border-t px-4 py-3"},[t("button",{onClick:B,class:"rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 hover:bg-gray-50"},"Close")])])])):u("",!0),!f.value&&j.value.length===0?(o(),l("div",we,"No exams for the selected year.")):u("",!0),f.value?(o(),l("div",_e,"Loading exams...")):u("",!0)])]),d(X)]))}};export{Me as default};
