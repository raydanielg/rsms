import{r as u,G as ge,q as X,E as Ae,c as o,a as me,u as Ue,h as Le,w as pe,b as e,p as i,s as g,I as Be,D as M,o as l,F as b,y as f,n as F,t as a,e as v,z as V,O as G,v as Ee,i as A,k as se}from"./app-BJQxAt22.js";import{_ as ze}from"./AuthenticatedLayout-DmZHm018.js";const Ne={class:"space-y-4"},He={class:"flex flex-col gap-3 rounded-xl border border-gray-100 bg-white p-4 shadow-sm sm:flex-row sm:items-end sm:justify-between"},Te={class:"grid flex-1 grid-cols-1 gap-3 sm:grid-cols-3"},Ie={class:"relative"},Oe={key:0,class:"absolute z-20 mt-1 w-full overflow-hidden rounded-md border border-gray-200 bg-white shadow"},Pe={key:0,class:"p-2 text-xs text-gray-500"},We={key:1,class:"max-h-60 overflow-auto text-sm"},Ge=["onClick"],Ke={class:"flex items-center justify-between"},Ye={class:"font-medium text-gray-800"},Je={class:"text-xs text-gray-500"},Qe={key:0,class:"pointer-events-none fixed right-4 top-4 z-50 space-y-2"},Ze={key:0,class:"pointer-events-auto rounded-md border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-800 shadow"},et={key:1,class:"pointer-events-auto rounded-md border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-800 shadow"},tt={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},st={class:"relative z-10 w-full max-w-md overflow-hidden rounded-xl bg-white shadow-xl"},ot={class:"flex items-center justify-between border-b px-5 py-3"},lt={class:"space-y-3 p-5 text-sm"},at={class:"text-gray-700"},rt={class:"font-semibold"},nt={class:"flex items-center justify-end gap-2 border-t px-5 py-3"},dt=["disabled"],it={class:"text-xs text-gray-500"},ut={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},vt={class:"relative z-10 w-full max-w-4xl overflow-hidden rounded-xl bg-white shadow-xl"},xt={class:"flex items-center justify-between border-b px-5 py-3"},gt={class:"flex items-center gap-3"},mt={class:"h-10 w-10 overflow-hidden rounded-full bg-gray-100"},pt=["src"],ct={class:"text-base font-semibold text-gray-800"},yt={class:"text-xs text-gray-500"},bt={class:"px-5 pt-4"},ft={key:0,class:"mx-5 mb-2 rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800"},wt={class:"flex flex-wrap gap-2 border-b pb-2 text-sm"},_t={class:"p-5"},ht={key:0,class:"grid gap-4 sm:grid-cols-2"},kt={class:"rounded-lg border border-gray-100 p-4"},Ct={class:"mt-2 grid grid-cols-1 gap-2 text-sm sm:grid-cols-2"},jt={class:"mt-0.5 inline-flex items-center rounded border border-gray-200 bg-gray-50 px-2 py-0.5 text-gray-800"},St={class:"mt-0.5 inline-flex items-center rounded border border-gray-200 bg-gray-50 px-2 py-0.5 text-gray-800"},Mt={class:"mt-0.5 inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-700"},qt={class:"mt-0.5 inline-flex items-center rounded border border-gray-200 bg-gray-50 px-2 py-0.5 text-gray-800"},Rt={class:"sm:col-span-2"},Dt={class:"mt-0.5 inline-flex items-center rounded border border-gray-200 bg-gray-50 px-2 py-0.5 text-gray-800"},$t={class:"mt-3 flex items-center justify-between"},Vt=["href"],Ft={class:"mt-1 flex flex-wrap gap-1"},Xt=["title"],At={key:0,class:"text-xs text-gray-500"},Ut={key:0,class:"mt-3 overflow-hidden rounded-md border border-gray-100"},Lt={class:"min-w-full divide-y divide-gray-200 text-sm"},Bt={class:"divide-y divide-gray-100"},Et={class:"px-3 py-2 text-gray-900"},zt={class:"px-3 py-2 text-gray-700"},Nt={class:"rounded-lg border border-gray-100 p-4"},Ht={class:"mt-2 text-sm text-gray-700"},Tt={class:"text-sm text-gray-700"},It={class:"text-sm text-gray-700"},Ot={key:1,class:"space-y-4"},Pt={class:"rounded-lg border border-gray-100 p-4"},Wt={class:"grid gap-3 sm:grid-cols-4"},Gt=["disabled"],Kt={class:"rounded-lg border border-gray-100"},Yt={class:"max-h-64 overflow-auto p-2"},Jt={key:0,class:"p-3 text-xs text-gray-500"},Qt={class:"divide-y divide-gray-100 text-sm"},Zt={class:"font-medium text-gray-800"},es={key:0,class:"ml-2 rounded bg-gray-100 px-2 py-0.5 text-xs text-gray-600"},ts={class:"text-xs text-gray-600"},ss={class:"text-xs text-gray-700"},os={key:2,class:"rounded-lg border border-gray-100 p-4 text-sm text-gray-600"},ls={key:3,class:"space-y-4"},as={class:"rounded-lg border border-gray-100 p-4"},rs={class:"text-sm text-gray-700"},ns={class:"font-medium"},ds={class:"text-sm text-gray-700"},is={class:"text-sm text-gray-700"},us={class:"rounded-lg border border-gray-100 p-4"},vs={class:"grid gap-3 sm:grid-cols-3"},xs=["disabled"],gs={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},ms={class:"relative z-10 w-full max-w-xl overflow-hidden rounded-xl bg-white shadow-xl"},ps={class:"flex items-center justify-between border-b px-5 py-3"},cs={class:"grid gap-4 p-5"},ys={class:"grid gap-2 sm:grid-cols-3"},bs={class:"flex items-center gap-2 text-sm text-gray-700"},fs={class:"flex items-center gap-2 text-sm text-gray-700"},ws={class:"flex items-center gap-2"},_s={class:"flex items-center gap-2 text-sm text-gray-700"},hs=["disabled"],ks=["value"],Cs={class:"flex items-center gap-4 text-sm text-gray-700"},js={class:"flex items-center gap-2"},Ss={class:"flex items-center gap-2 opacity-70"},Ms={class:"flex items-center justify-end gap-2 border-t px-5 py-3"},qs={key:2,class:"fixed inset-0 z-50 flex items-center justify-center"},Rs={class:"relative z-10 w-full max-w-3xl overflow-hidden rounded-xl bg-white shadow-xl"},Ds={class:"flex items-center justify-between border-b px-5 py-3"},$s={class:"grid gap-5 p-5 sm:grid-cols-2"},Vs={class:"space-y-3"},Fs={class:"rounded-md border border-gray-200 bg-gray-50 p-3 text-xs text-gray-700"},Xs={class:"mt-2 list-decimal space-y-1 pl-5"},As=["href"],Us={class:"min-h-[200px]"},Ls={class:"mb-2 text-sm font-semibold text-gray-800"},Bs={key:0,class:"text-gray-500"},Es={key:0,class:"overflow-x-auto rounded-md border border-gray-200"},zs={class:"min-w-full divide-y divide-gray-200 text-xs"},Ns={class:"bg-gray-50"},Hs={class:"divide-y divide-gray-100"},Ts={key:1,class:"rounded-md border border-dashed border-gray-300 p-6 text-center text-xs text-gray-500"},Is={class:"flex items-center justify-end gap-2 border-t px-5 py-3"},Os=["disabled"],Ps=["value"],Ws={class:"flex gap-2"},Gs={class:"flex flex-col gap-2 rounded-xl border border-gray-100 bg-white p-4 shadow-sm sm:flex-row sm:items-center sm:justify-between"},Ks={class:"flex flex-wrap items-center gap-2"},Ys=["href"],Js={class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},Qs={class:"flex flex-wrap items-center justify-between gap-2"},Zs={class:"flex flex-wrap gap-2"},eo=["onClick"],to={key:0,class:"ml-1 text-[10px] text-gray-500"},so={class:"flex items-center gap-2 text-xs text-gray-700"},oo={class:"overflow-hidden rounded-xl border border-gray-100 bg-white shadow-sm"},lo={class:"overflow-x-auto"},ao={key:0,class:"min-w-full divide-y divide-gray-200 text-sm"},ro={class:"divide-y divide-gray-100"},no={class:"px-4 py-3 text-gray-900"},io={class:"px-4 py-3 text-gray-700"},uo={class:"px-4 py-3"},vo={class:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-700"},xo={class:"px-4 py-3 text-gray-700"},go={class:"px-4 py-3"},mo={class:"flex justify-end gap-2"},po=["onClick"],co=["onClick"],yo=["onClick"],bo=["onClick"],fo={key:0},wo={key:1,class:"divide-y divide-gray-100"},_o={class:"sticky top-0 z-10 bg-white px-4 py-2 text-sm font-semibold text-gray-800 ring-1 ring-gray-100"},ho={class:"ml-1 text-xs text-gray-500"},ko={class:"min-w-full divide-y divide-gray-200 text-sm"},Co={class:"divide-y divide-gray-100"},jo={class:"px-4 py-3 text-gray-900"},So={class:"px-4 py-3 text-gray-700"},Mo={class:"px-4 py-3"},qo={class:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-700"},Ro={class:"px-4 py-3"},Do={class:"flex justify-end gap-2"},$o=["onClick"],Vo=["onClick"],Fo=["onClick"],Xo={key:0,class:"flex flex-wrap items-center justify-between gap-2"},Ao={class:"text-xs text-gray-500"},Uo={class:"flex flex-wrap gap-1"},Lo=["disabled","onClick","innerHTML"],Bo={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},Eo={class:"relative z-10 w-full max-w-2xl overflow-hidden rounded-xl bg-white shadow-xl"},zo={class:"flex items-center justify-between border-b px-5 py-3"},No={class:"grid gap-4 p-5 sm:grid-cols-2"},Ho={key:0,class:"mt-1 text-xs text-red-600"},To={key:0,class:"mt-1 text-xs text-red-600"},Io=["value"],Oo={key:0,class:"mt-1 text-xs text-red-600"},Po={key:0,class:"mt-1 text-xs text-red-600"},Wo={key:0,class:"mt-1 text-xs text-red-600"},Go={class:"flex"},Ko={class:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-50 px-2 text-xs text-gray-600"},Yo={key:0,class:"mt-1 text-xs text-gray-500"},Jo={key:1,class:"mt-1 text-xs text-red-600"},Qo={class:"sm:col-span-2"},Zo={key:0,class:"mt-1 text-xs text-red-600"},el={key:0,class:"mt-1 text-xs text-red-600"},tl={class:"sm:col-span-2"},sl={key:0,class:"mt-1 text-xs text-red-600"},ol={key:1,class:"mt-2 rounded-md border border-amber-200 bg-amber-50 p-2 text-xs text-amber-800"},ll={class:"mt-1 list-disc pl-5"},al={class:"flex items-center justify-end gap-2 border-t px-5 py-3"},rl=["disabled"],il={__name:"Index",props:{students:{type:Object,required:!0},classes:{type:Array,required:!0},all_classes:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({q:"",class:"",sex:""})},school_number:{type:String,default:""}},setup(j){const k=j,U=u(k.filters.q||""),q=u(k.filters.class||""),I=u(k.filters.sex||"");function R(r=route("students.index")){se.get(r,{q:U.value,class:q.value,sex:I.value},{preserveState:!0,preserveScroll:!0,replace:!0})}const L=u(!1),D=u({id:null,name:"",reg_no:""}),K=u(!1);function ne(r){D.value={id:r.id||null,name:r.name,reg_no:r.reg_no},L.value=!0}async function ce(){K.value=!0;try{if(!D.value.id&&D.value.reg_no)try{const r=await fetch(route("students.show.json",{reg_no:D.value.reg_no}),{headers:{"X-Requested-With":"XMLHttpRequest"}});if(r.ok){const t=await r.json();D.value.id=t.id}}catch{}if(!D.value.id){window.__toast&&window.__toast("error","Missing student ID");return}await se.delete(route("students.destroy",{id:D.value.id}),{preserveScroll:!0,onSuccess:()=>{L.value=!1,window.__toast&&window.__toast("success","Student deleted")},onError:()=>{window.__toast&&window.__toast("error","Failed to delete")}})}finally{K.value=!1}}const ye=u(!1),de=u(!1),be=u({id:null,name:"",sex:"M",class_name:"",dob:"",academic_year:new Date().getFullYear(),guardian_name:"",guardian_phone:"",guardian_relation:"",exam_no:"",photo:null});async function ie(r){ye.value=!0,de.value=!0,E.value="";try{const t=r.id?{id:r.id}:{reg_no:r.reg_no},s=route("students.show.json",t),m=await fetch(s,{headers:{"X-Requested-With":"XMLHttpRequest"}}),d=m.ok?await m.json():null;if(!d){E.value="Failed to load student for editing.",window.__toast&&window.__toast("error","Failed to load student");return}be.value={id:d.id,name:d.name||"",sex:d.sex||"M",class_name:d.class_name||"",dob:d.dob||"",academic_year:d.academic_year||new Date().getFullYear(),guardian_name:d.guardian_name||"",guardian_phone:d.guardian_phone||"",guardian_relation:d.guardian_relation||"",exam_no:d.exam_no||S.value,photo:null}}finally{de.value=!1}}u(!1);const B=u(!1),c=u({format:"csv",scope:"current",class_name:""});function fe(){c.value={format:"csv",scope:"current",class_name:q.value||""},B.value=!0}function we(){let r=q.value||"";if(c.value.scope==="all"&&(r=""),c.value.scope==="class"&&c.value.class_name&&(r=c.value.class_name),c.value.format==="csv"){const t=route("students.export",{q:U.value,class:r,sex:I.value});window.location.href=t,B.value=!1}else alert("PDF export will be enabled after installing barryvdh/laravel-dompdf.")}function _e(){H.value=!0,S.value&&!x.value.exam_no&&(x.value.exam_no=S.value)}function he(){U.value="",q.value="",I.value="",R()}const p=u({open:!1,items:[],loading:!1,index:-1});let oe;ge(U,r=>{oe&&clearTimeout(oe),oe=setTimeout(async()=>{if(R(),!r||r.length<2){p.value={open:!1,items:[],loading:!1,index:-1};return}p.value.loading=!0;try{const t=route("students.search",{q:r}),s=await fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest"}});p.value.items=s.ok?await s.json():[],p.value.open=p.value.items.length>0}finally{p.value.loading=!1}},300)});function ke(r){if(p.value.open){if(r.key==="ArrowDown"&&(r.preventDefault(),p.value.index=Math.min(p.value.index+1,p.value.items.length-1)),r.key==="ArrowUp"&&(r.preventDefault(),p.value.index=Math.max(p.value.index-1,0)),r.key==="Enter"&&p.value.index>=0){r.preventDefault();const t=p.value.items[p.value.index];t&&z(t)}r.key==="Escape"&&(p.value.open=!1)}}const Y=u(!1),n=u(null),ue=u(!1),E=u(""),Ce=u([]),C=u("profile"),O=u([]),h=u({type:"Merit",severity:"",date:new Date().toISOString().slice(0,10),description:""}),J=u(!1),w=u({status:"active",status_reason:"",status_date:new Date().toISOString().slice(0,10)}),Q=u(!1);async function z(r){p.value.open=!1,ue.value=!0,E.value="",Y.value=!0;try{const t=route("students.show.json",r.id?{id:r.id}:{reg_no:r.reg_no}),s=await fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(s.ok){if(n.value=await s.json(),(!n.value.class_subjects||n.value.class_subjects.length===0)&&n.value.class_info?.id)try{const _=await fetch(route("classes.show.json",{id:n.value.class_info.id}),{headers:{"X-Requested-With":"XMLHttpRequest"}});if(_.ok){const re=await _.json();n.value.class_subjects=re?.subjects||[]}}catch{}}else if(n.value=r,E.value="Failed to load full details.",r?.class_name)try{const _=await fetch(route("classes.show.json",{name:r.class_name}),{headers:{"X-Requested-With":"XMLHttpRequest"}});if(_.ok){const re=await _.json();n.value.class_subjects=re?.subjects||[]}}catch{}w.value.status=n.value?.status||"active",w.value.status_reason=n.value?.status_reason||"",w.value.status_date=n.value?.status_date||new Date().toISOString().slice(0,10);const m=await fetch(route("students.history",{id:n.value?.id||r.id}),{headers:{"X-Requested-With":"XMLHttpRequest"}});Ce.value=m.ok?(await m.json()).items:[];const d=await fetch(route("students.behaviours",{id:n.value?.id||r.id}),{headers:{"X-Requested-With":"XMLHttpRequest"}});O.value=d.ok?(await d.json()).items:[]}finally{ue.value=!1}}async function je(){if(n.value?.id){J.value=!0;try{if((await fetch(route("students.behaviours.add",{id:n.value.id}),{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector("meta[name=csrf-token]")?.getAttribute("content")||""},body:new URLSearchParams({type:h.value.type,severity:h.value.severity||"",date:h.value.date,description:h.value.description||""})})).ok){const t=await fetch(route("students.behaviours",{id:n.value.id}),{headers:{"X-Requested-With":"XMLHttpRequest"}});O.value=t.ok?(await t.json()).items:O.value,h.value.description="",window.__toast&&window.__toast("success","Behaviour saved")}else window.__toast&&window.__toast("error","Failed to save behaviour")}finally{J.value=!1}}}async function Se(){if(n.value?.id){Q.value=!0;try{(await fetch(route("students.status.update",{id:n.value.id}),{method:"PATCH",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector("meta[name=csrf-token]")?.getAttribute("content")||"","Content-Type":"application/json"},body:JSON.stringify({status:w.value.status,status_reason:w.value.status_reason||"",status_date:w.value.status_date})})).ok?(n.value.status=w.value.status,n.value.status_reason=w.value.status_reason,n.value.status_date=w.value.status_date,window.__toast&&window.__toast("success","Status updated")):window.__toast&&window.__toast("error","Failed to update status")}finally{Q.value=!1}}}const N=u(!1),P=u(null),Z=u(!1),$=u({headers:[],rows:[],total:0});function Me(){$.value={headers:[],rows:[],total:0},P.value=null,N.value=!0}function qe(r){const t=r.split(/\r?\n/).filter(d=>d.trim().length);if(!t.length)return{headers:[],rows:[],total:0};const s=t[0].split(",").map(d=>d.trim()),m=t.slice(1).map(d=>d.split(",").map(_=>_.trim()));return{headers:s,rows:m.slice(0,10),total:m.length}}function Re(r){const t=r.target.files?.[0];if(P.value=t||null,!t){$.value={headers:[],rows:[],total:0};return}const s=new FileReader;s.onload=()=>{try{$.value=qe(String(s.result||""))}catch{$.value={headers:[],rows:[],total:0}}},s.readAsText(t)}async function De(){if(!P.value)return;const r=new FormData;r.append("file",P.value),Z.value=!0;try{await se.post(route("students.import"),r,{preserveScroll:!0,onSuccess:()=>{N.value=!1,window.__toast&&window.__toast("success","Import completed")},onError:()=>{window.__toast&&window.__toast("error","Import failed")}})}finally{Z.value=!1}}const H=u(!1),x=u({name:"",sex:"M",class_name:"",dob:"",academic_year:new Date().getFullYear(),guardian_name:"",guardian_phone:"",guardian_relation:"",exam_no:"",photo:null}),S=X(()=>k.school_number?`${k.school_number}-`:"");function $e(r){x.value.photo=r.target.files?.[0]??null}function Ve(){if(!S.value)return;const r=x.value.exam_no||"";r&&!r.startsWith(S.value)&&(x.value.exam_no=S.value+r.replace(/^.*?-/,""))}const ee=u(!1);async function Fe(){const r=new FormData;Object.entries(x.value).forEach(([t,s])=>{s!=null&&s!==""&&r.append(t,s)}),ee.value=!0;try{await se.post(route("students.store"),r,{preserveScroll:!0,onSuccess:()=>{H.value=!1,window.__toast&&window.__toast("success","Student added successfully")},onError:t=>{const s=Object.values(t||{})[0]||"Failed to add student";window.__toast&&window.__toast("error",String(s))}}),x.value={name:"",sex:"M",class_name:"",dob:"",academic_year:new Date().getFullYear(),guardian_name:"",guardian_phone:"",guardian_relation:"",exam_no:S.value,photo:null}}finally{ee.value=!1}}const ve=Ae(),y=X(()=>ve.props.errors||{}),T=X(()=>ve.props.flash||{}),le=u(!1),te=X(()=>{const r={};return(k.students?.data||[]).forEach(t=>{r[t.class_name]=(r[t.class_name]||0)+1}),r});X(()=>Object.keys(te.value).sort());const xe=X(()=>{const r=new Set([...k.all_classes||[],...k.classes||[]]);return Array.from(r).filter(Boolean).sort()}),Xe=X(()=>k.all_classes&&k.all_classes.length?k.all_classes:k.classes),W=u({count:0,students:[]});let ae;return ge(()=>x.value.guardian_phone,r=>{ae&&clearTimeout(ae),ae=setTimeout(async()=>{if(!r){W.value={count:0,students:[]};return}try{const t=route("students.guardian.stats",{phone:r}),s=await fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest"}});s.ok&&(W.value=await s.json())}catch{}},300)}),(r,t)=>(l(),o(b,null,[me(Ue(Le),{title:"Students"}),me(ze,null,{header:pe(()=>[...t[54]||(t[54]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Students",-1)])]),default:pe(()=>[e("div",Ne,[e("div",He,[e("div",Te,[e("div",Ie,[t[58]||(t[58]=e("label",{for:"q",class:"mb-1 block text-xs font-medium text-gray-600"},"Search (Reg_No or Name)",-1)),g(e("input",{id:"q","onUpdate:modelValue":t[0]||(t[0]=s=>U.value=s),onKeydown:ke,onKeyup:t[1]||(t[1]=Be(s=>R(),["enter"])),type:"text",placeholder:"e.g. RSMS-001 or Asha",class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},null,544),[[M,U.value]]),p.value.open?(l(),o("div",Oe,[p.value.loading?(l(),o("div",Pe,"Loading...")):(l(),o("ul",We,[(l(!0),o(b,null,f(p.value.items,(s,m)=>(l(),o("li",{key:s.reg_no,onClick:d=>z(s),class:F(["cursor-pointer px-3 py-2 hover:bg-gray-50",m===p.value.index?"bg-gray-50":""])},[e("div",Ke,[e("div",Ye,a(s.name),1),e("div",Je,a(s.reg_no),1)]),T.value.success||T.value.error?(l(),o("div",Qe,[T.value.success?(l(),o("div",Ze,a(T.value.success),1)):i("",!0),T.value.error?(l(),o("div",et,a(T.value.error),1)):i("",!0)])):i("",!0),L.value?(l(),o("div",tt,[e("div",{class:"absolute inset-0 bg-black/40",onClick:t[2]||(t[2]=d=>L.value=!1)}),e("div",st,[e("div",ot,[t[56]||(t[56]=e("h3",{class:"text-base font-semibold text-gray-800"},"Delete Student",-1)),e("button",{onClick:t[3]||(t[3]=d=>L.value=!1),class:"rounded-md p-1 text-gray-500 hover:bg-gray-100","aria-label":"Close"},[...t[55]||(t[55]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",lt,[e("p",at,[t[57]||(t[57]=v("Are you sure you want to delete ",-1)),e("span",rt,a(D.value.name),1),v(" ("+a(D.value.reg_no)+")? This action cannot be undone.",1)])]),e("div",nt,[e("button",{onClick:t[4]||(t[4]=d=>L.value=!1),type:"button",class:"rounded-md border border-gray-300 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"},"Cancel"),e("button",{disabled:K.value,onClick:ce,type:"button",class:"rounded-md bg-rose-600 px-4 py-2 text-sm font-medium text-white hover:bg-rose-700 disabled:opacity-60"},a(K.value?"Deleting...":"Delete"),9,dt)])])])):i("",!0),e("div",it,a(s.class_name)+" • "+a(s.sex),1)],10,Ge))),128))]))])):i("",!0)]),Y.value?(l(),o("div",ut,[e("div",{class:"absolute inset-0 bg-black/40",onClick:t[5]||(t[5]=s=>Y.value=!1)}),e("div",vt,[e("div",xt,[e("div",gt,[e("div",mt,[n.value?.photo_path?(l(),o("img",{key:0,src:"/storage/"+n.value.photo_path,alt:"photo",class:"h-10 w-10 object-cover"},null,8,pt)):i("",!0)]),e("div",null,[e("div",ct,a(n.value?.name||"Student"),1),e("div",yt,a(n.value?.reg_no)+" • "+a(n.value?.class_name)+" • "+a(n.value?.sex),1)])]),e("button",{onClick:t[6]||(t[6]=s=>Y.value=!1),class:"rounded-md p-1 text-gray-500 hover:bg-gray-100","aria-label":"Close"},[...t[59]||(t[59]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",bt,[E.value?(l(),o("div",ft,[v(a(E.value)+" ",1),e("button",{onClick:t[7]||(t[7]=s=>z(n.value||{})),class:"ml-2 rounded border border-amber-300 px-2 py-0.5 text-amber-700 hover:bg-amber-100"},"Retry")])):i("",!0),e("div",wt,[e("button",{onClick:t[8]||(t[8]=s=>C.value="profile"),class:F([C.value==="profile"?"border-b-2 border-green-600 text-green-700":"text-gray-600","px-2 py-1"])},"Profile",2),e("button",{onClick:t[9]||(t[9]=s=>C.value="behaviours"),class:F([C.value==="behaviours"?"border-b-2 border-green-600 text-green-700":"text-gray-600","px-2 py-1"])},"Behaviours",2),e("button",{onClick:t[10]||(t[10]=s=>C.value="results"),class:F([C.value==="results"?"border-b-2 border-green-600 text-green-700":"text-gray-600","px-2 py-1"])},"Results History",2),e("button",{onClick:t[11]||(t[11]=s=>C.value="status"),class:F([C.value==="status"?"border-b-2 border-green-600 text-green-700":"text-gray-600","px-2 py-1"])},"Status & Actions",2)])]),e("div",_t,[C.value==="profile"?(l(),o("div",ht,[e("div",kt,[t[67]||(t[67]=e("div",{class:"text-sm font-semibold text-gray-800"},"Registration",-1)),e("div",Ct,[e("div",null,[t[60]||(t[60]=e("div",{class:"text-xs text-gray-500"},"Reg No",-1)),e("div",jt,a(n.value?.reg_no),1)]),e("div",null,[t[61]||(t[61]=e("div",{class:"text-xs text-gray-500"},"Class",-1)),e("div",St,a(n.value?.class_name),1)]),e("div",null,[t[62]||(t[62]=e("div",{class:"text-xs text-gray-500"},"Sex",-1)),e("div",Mt,a(n.value?.sex),1)]),e("div",null,[t[63]||(t[63]=e("div",{class:"text-xs text-gray-500"},"DOB",-1)),e("div",qt,a(n.value?.dob||"-"),1)]),e("div",Rt,[t[64]||(t[64]=e("div",{class:"text-xs text-gray-500"},"Exam No",-1)),e("div",Dt,a(n.value?.exam_no||"-"),1)])]),e("div",$t,[t[65]||(t[65]=e("div",{class:"text-sm font-semibold text-gray-800"},"Assigned subjects",-1)),n.value?.class_info?.id?(l(),o("a",{key:0,href:r.route("classes.show",{id:n.value.class_info.id}),class:"text-xs text-green-700 hover:underline"},"Open class",8,Vt)):i("",!0)]),e("div",Ft,[(l(!0),o(b,null,f(n.value?.class_subjects||[],s=>(l(),o("span",{key:s.id,title:s.name,class:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-700"},a(s.code||s.name),9,Xt))),128)),!n.value?.class_subjects||n.value.class_subjects.length===0?(l(),o("span",At,"No subjects")):i("",!0)]),n.value?.class_subjects&&n.value.class_subjects.length?(l(),o("div",Ut,[e("table",Lt,[t[66]||(t[66]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-3 py-2 text-left font-semibold text-gray-700"},"Code"),e("th",{class:"px-3 py-2 text-left font-semibold text-gray-700"},"Name")])],-1)),e("tbody",Bt,[(l(!0),o(b,null,f(n.value.class_subjects,s=>(l(),o("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Et,a(s.code||"—"),1),e("td",zt,a(s.name),1)]))),128))])])])):i("",!0)]),e("div",Nt,[t[68]||(t[68]=e("div",{class:"text-sm font-semibold text-gray-800"},"Guardian",-1)),e("div",Ht,"Name: "+a(n.value?.guardian_name||"-"),1),e("div",Tt,"Phone: "+a(n.value?.guardian_phone||"-"),1),e("div",It,"Relation: "+a(n.value?.guardian_relation||"-"),1)])])):i("",!0),C.value==="behaviours"?(l(),o("div",Ot,[e("div",Pt,[t[71]||(t[71]=e("div",{class:"mb-3 text-sm font-semibold text-gray-800"},"Add Behaviour",-1)),e("div",Wt,[g(e("select",{"onUpdate:modelValue":t[12]||(t[12]=s=>h.value.type=s),class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},[...t[69]||(t[69]=[e("option",{value:"Merit"},"Merit",-1),e("option",{value:"Demerit"},"Demerit",-1)])],512),[[V,h.value.type]]),g(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>h.value.severity=s),class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},[...t[70]||(t[70]=[e("option",{value:""},"Severity",-1),e("option",null,"Low",-1),e("option",null,"Medium",-1),e("option",null,"High",-1)])],512),[[V,h.value.severity]]),g(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>h.value.date=s),type:"date",class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},null,512),[[M,h.value.date]]),e("button",{disabled:J.value,onClick:je,class:"rounded-md bg-green-600 px-3 py-2 text-sm font-medium text-white hover:bg-green-700 disabled:opacity-60"},a(J.value?"Saving...":"Save"),9,Gt)]),g(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=s=>h.value.description=s),rows:"3",placeholder:"Description (optional)",class:"mt-3 w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},null,512),[[M,h.value.description]])]),e("div",Kt,[t[72]||(t[72]=e("div",{class:"border-b px-4 py-2 text-sm font-semibold text-gray-800"},"Recent Behaviours",-1)),e("div",Yt,[O.value.length===0?(l(),o("div",Jt,"No behaviour records.")):i("",!0),e("ul",Qt,[(l(!0),o(b,null,f(O.value,s=>(l(),o("li",{key:s.id,class:"flex items-start justify-between gap-3 px-3 py-2"},[e("div",null,[e("div",Zt,[v(a(s.type)+" ",1),s.severity?(l(),o("span",es,a(s.severity),1)):i("",!0)]),e("div",ts,a(s.date||"-"),1),e("div",ss,a(s.description),1)])]))),128))])])])])):i("",!0),C.value==="results"?(l(),o("div",os," Results history integration can be wired here. ")):i("",!0),C.value==="status"?(l(),o("div",ls,[e("div",as,[t[74]||(t[74]=e("div",{class:"mb-3 text-sm font-semibold text-gray-800"},"Current Status",-1)),e("div",rs,[t[73]||(t[73]=v("Status: ",-1)),e("span",ns,a(n.value?.status||"active"),1)]),e("div",ds,"Since: "+a(n.value?.status_date||"-"),1),e("div",is,"Reason: "+a(n.value?.status_reason||"-"),1)]),e("div",us,[t[76]||(t[76]=e("div",{class:"mb-3 text-sm font-semibold text-gray-800"},"Update Status",-1)),e("div",vs,[g(e("select",{"onUpdate:modelValue":t[16]||(t[16]=s=>w.value.status=s),class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},[...t[75]||(t[75]=[e("option",{value:"active"},"Active",-1),e("option",{value:"suspended"},"Suspended",-1),e("option",{value:"transferred"},"Transferred",-1),e("option",{value:"alumni"},"Alumni",-1),e("option",{value:"expelled"},"Expelled",-1)])],512),[[V,w.value.status]]),g(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>w.value.status_date=s),type:"date",class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},null,512),[[M,w.value.status_date]]),e("button",{disabled:Q.value,onClick:Se,class:"rounded-md bg-green-600 px-3 py-2 text-sm font-medium text-white hover:bg-green-700 disabled:opacity-60"},a(Q.value?"Saving...":"Save"),9,xs)]),g(e("textarea",{"onUpdate:modelValue":t[18]||(t[18]=s=>w.value.status_reason=s),rows:"3",placeholder:"Reason (optional)",class:"mt-3 w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},null,512),[[M,w.value.status_reason]])])])):i("",!0)])])])):i("",!0),B.value?(l(),o("div",gs,[e("div",{class:"absolute inset-0 bg-black/40",onClick:t[19]||(t[19]=s=>B.value=!1)}),e("div",ms,[e("div",ps,[t[78]||(t[78]=e("h3",{class:"text-base font-semibold text-gray-800"},"Export Students",-1)),e("button",{onClick:t[20]||(t[20]=s=>B.value=!1),class:"rounded-md p-1 text-gray-500 hover:bg-gray-100","aria-label":"Close"},[...t[77]||(t[77]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",cs,[e("div",null,[t[83]||(t[83]=e("div",{class:"mb-1 text-xs font-medium text-gray-600"},"Scope",-1)),e("div",ys,[e("label",bs,[g(e("input",{type:"radio",value:"current","onUpdate:modelValue":t[21]||(t[21]=s=>c.value.scope=s)},null,512),[[G,c.value.scope]]),t[79]||(t[79]=v(" Current filters ",-1))]),e("label",fs,[g(e("input",{type:"radio",value:"all","onUpdate:modelValue":t[22]||(t[22]=s=>c.value.scope=s)},null,512),[[G,c.value.scope]]),t[80]||(t[80]=v(" All students ",-1))]),e("div",ws,[e("label",_s,[g(e("input",{type:"radio",value:"class","onUpdate:modelValue":t[23]||(t[23]=s=>c.value.scope=s)},null,512),[[G,c.value.scope]]),t[81]||(t[81]=v(" Class ",-1))]),g(e("select",{disabled:c.value.scope!=="class","onUpdate:modelValue":t[24]||(t[24]=s=>c.value.class_name=s),class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},[t[82]||(t[82]=e("option",{value:""},"Select class",-1)),(l(!0),o(b,null,f(j.classes,s=>(l(),o("option",{key:s,value:s},a(s),9,ks))),128))],8,hs),[[V,c.value.class_name]])])])]),e("div",null,[t[86]||(t[86]=e("div",{class:"mb-1 text-xs font-medium text-gray-600"},"Format",-1)),e("div",Cs,[e("label",js,[g(e("input",{type:"radio",value:"csv","onUpdate:modelValue":t[25]||(t[25]=s=>c.value.format=s)},null,512),[[G,c.value.format]]),t[84]||(t[84]=v(" CSV",-1))]),e("label",Ss,[g(e("input",{type:"radio",value:"pdf","onUpdate:modelValue":t[26]||(t[26]=s=>c.value.format=s)},null,512),[[G,c.value.format]]),t[85]||(t[85]=v(" PDF",-1))])]),t[87]||(t[87]=e("p",{class:"mt-1 text-xs text-gray-500"},"PDF will be enabled after installing the PDF package.",-1))])]),e("div",Ms,[e("button",{onClick:t[27]||(t[27]=s=>B.value=!1),type:"button",class:"rounded-md border border-gray-300 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"},"Cancel"),e("button",{onClick:we,type:"button",class:"rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white hover:bg-green-700"},"Export")])])])):i("",!0),N.value?(l(),o("div",qs,[e("div",{class:"absolute inset-0 bg-black/40",onClick:t[28]||(t[28]=s=>N.value=!1)}),e("div",Rs,[e("div",Ds,[t[89]||(t[89]=e("h3",{class:"text-base font-semibold text-gray-800"},"Import Students (CSV)",-1)),e("button",{onClick:t[29]||(t[29]=s=>N.value=!1),class:"rounded-md p-1 text-gray-500 hover:bg-gray-100","aria-label":"Close"},[...t[88]||(t[88]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",$s,[e("div",Vs,[e("div",Fs,[t[95]||(t[95]=e("div",{class:"font-semibold text-gray-800"},"Instructions",-1)),e("ol",Xs,[t[92]||(t[92]=e("li",null,"Download the CSV template and fill it.",-1)),t[93]||(t[93]=e("li",null,[v("Required columns: "),e("code",null,"reg_no,name,sex,class_name"),v(".")],-1)),t[94]||(t[94]=e("li",null,[v("Optional columns: "),e("code",null,"guardian_name,guardian_phone,guardian_relation,academic_year,dob,exam_no"),v(".")],-1)),e("li",null,[t[90]||(t[90]=v("If you include ",-1)),t[91]||(t[91]=e("code",null,"exam_no",-1)),v(", prefix must match your school number ("+a(j.school_number)+"-XXXX).",1)])])]),e("a",{href:r.route("students.template"),class:"inline-flex items-center justify-center rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50"},"Download Template",8,As),e("div",null,[t[96]||(t[96]=e("label",{class:"mb-1 block text-xs font-medium text-gray-600"},[v("Choose CSV file "),e("span",{class:"text-red-600"},"*")],-1)),e("input",{type:"file",accept:".csv,text/csv",onChange:Re,class:"w-full rounded-md border border-gray-300 text-sm shadow-sm"},null,32),t[97]||(t[97]=e("p",{class:"mt-1 text-xs text-gray-500"},"Max size ~10MB. Use commas, no embedded commas inside values.",-1))])]),e("div",Us,[e("div",Ls,[t[98]||(t[98]=v("Preview ",-1)),$.value.total?(l(),o("span",Bs,"(showing first 10 of "+a($.value.total)+")",1)):i("",!0)]),$.value.headers.length?(l(),o("div",Es,[e("table",zs,[e("thead",Ns,[e("tr",null,[(l(!0),o(b,null,f($.value.headers,s=>(l(),o("th",{key:s,class:"px-3 py-2 text-left font-medium text-gray-700"},a(s),1))),128))])]),e("tbody",Hs,[(l(!0),o(b,null,f($.value.rows,(s,m)=>(l(),o("tr",{key:m},[(l(!0),o(b,null,f(s,(d,_)=>(l(),o("td",{key:_,class:"px-3 py-2 text-gray-700"},a(d),1))),128))]))),128))])])])):(l(),o("div",Ts,"No file selected."))])]),e("div",Is,[e("button",{onClick:t[30]||(t[30]=s=>N.value=!1),type:"button",class:"rounded-md border border-gray-300 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"},"Cancel"),e("button",{disabled:!P.value||Z.value,onClick:De,type:"button",class:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-60"},a(Z.value?"Importing...":"Confirm Import"),9,Os)])])])):i("",!0),e("div",null,[t[100]||(t[100]=e("label",{for:"class",class:"mb-1 block text-xs font-medium text-gray-600"},"Class",-1)),g(e("select",{id:"class","onUpdate:modelValue":t[31]||(t[31]=s=>q.value=s),onChange:t[32]||(t[32]=s=>R()),class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},[t[99]||(t[99]=e("option",{value:""},"All",-1)),(l(!0),o(b,null,f(xe.value,s=>(l(),o("option",{key:s,value:s},a(s),9,Ps))),128))],544),[[V,q.value]])]),e("div",null,[t[102]||(t[102]=e("label",{for:"sex",class:"mb-1 block text-xs font-medium text-gray-600"},"Sex",-1)),g(e("select",{id:"sex","onUpdate:modelValue":t[33]||(t[33]=s=>I.value=s),onChange:t[34]||(t[34]=s=>R()),class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},[...t[101]||(t[101]=[e("option",{value:""},"All",-1),e("option",{value:"M"},"Male",-1),e("option",{value:"F"},"Female",-1)])],544),[[V,I.value]])])]),e("div",Ws,[e("button",{type:"button",onClick:t[35]||(t[35]=s=>he()),class:"rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50"},"Clear"),e("button",{type:"button",onClick:t[36]||(t[36]=s=>R()),class:"rounded-md bg-green-600 px-3 py-2 text-sm font-medium text-white hover:bg-green-700"},"Search")])]),e("div",Gs,[t[103]||(t[103]=e("div",{class:"text-sm text-gray-600"},"Bulk actions",-1)),e("div",Ks,[e("button",{type:"button",onClick:t[37]||(t[37]=s=>Me()),class:"rounded-md bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700"},"Import CSV"),e("a",{href:r.route("students.template"),class:"rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50"},"Download Template",8,Ys),e("button",{type:"button",onClick:t[38]||(t[38]=s=>fe()),class:"rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50"},"Export"),e("button",{type:"button",onClick:t[39]||(t[39]=s=>_e()),class:"rounded-md bg-emerald-600 px-3 py-2 text-sm font-medium text-white hover:bg-emerald-700"},"Add Student")])]),e("div",Js,[e("div",Qs,[e("div",Zs,[e("button",{type:"button",onClick:t[40]||(t[40]=s=>{q.value="",R()}),class:F(["rounded-full px-3 py-1 text-xs",q.value===""?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},"All",2),(l(!0),o(b,null,f(xe.value,s=>(l(),o("button",{key:s,type:"button",onClick:m=>{q.value=s,R()},class:F(["rounded-full px-3 py-1 text-xs",q.value===s?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[v(a(s),1),te.value[s]?(l(),o("span",to," ("+a(te.value[s])+")",1)):i("",!0)],10,eo))),128))]),e("label",so,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[41]||(t[41]=s=>le.value=s)},null,512),[[Ee,le.value]]),t[104]||(t[104]=v(" Group by class ",-1))])])]),e("div",oo,[e("div",lo,[le.value?(l(),o("div",wo,[(l(!0),o(b,null,f(te.value,(s,m)=>(l(),o("div",{key:m,class:"p-0"},[e("div",_o,[v(a(m)+" ",1),e("span",ho,"("+a(s)+")",1)]),e("table",ko,[t[114]||(t[114]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left font-semibold text-gray-700"},"Reg_No"),e("th",{class:"px-4 py-3 text-left font-semibold text-gray-700"},"Full name"),e("th",{class:"px-4 py-3 text-left font-semibold text-gray-700"},"Sex"),e("th",{class:"px-4 py-3 text-right font-semibold text-gray-700"},"Action")])],-1)),e("tbody",Co,[(l(!0),o(b,null,f((j.students.data||[]).filter(d=>d.class_name===m),d=>(l(),o("tr",{key:d.reg_no,class:"hover:bg-gray-50"},[e("td",jo,a(d.reg_no),1),e("td",So,a(d.name),1),e("td",Mo,[e("span",qo,a(d.sex),1)]),e("td",Ro,[e("div",Do,[e("button",{type:"button",onClick:A(_=>z(d),["stop"]),class:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-indigo-50 text-indigo-600 ring-1 ring-inset ring-indigo-200 hover:bg-indigo-100","aria-label":"View"},[...t[111]||(t[111]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12s3.75-7.5 9.75-7.5S21.75 12 21.75 12s-3.75 7.5-9.75 7.5S2.25 12 2.25 12z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 15a3 3 0 100-6 3 3 0 000 6z"})],-1)])],8,$o),e("button",{type:"button",onClick:A(_=>ie(d),["stop"]),class:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-emerald-50 text-emerald-600 ring-1 ring-inset ring-emerald-200 hover:bg-emerald-100","aria-label":"Edit"},[...t[112]||(t[112]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 3.487a2.1 2.1 0 113 3L8.25 18.1 4.5 19.5l1.4-3.75 10.962-12.263z"})],-1)])],8,Vo),e("button",{type:"button",onClick:A(_=>ne(d),["stop"]),class:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-rose-50 text-rose-600 ring-1 ring-inset ring-rose-200 hover:bg-rose-100","aria-label":"Delete"},[...t[113]||(t[113]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 7h12M9 7V5a2 2 0 012-2h2a2 2 0 012 2v2m-1 0l-.867 12.142A2 2 0 0114.138 21H9.862a2 2 0 01-1.995-1.858L7 7z"})],-1)])],8,Fo)])])]))),128))])])]))),128))])):(l(),o("table",ao,[t[110]||(t[110]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left font-semibold text-gray-700"},"Reg_No"),e("th",{class:"px-4 py-3 text-left font-semibold text-gray-700"},"Full name"),e("th",{class:"px-4 py-3 text-left font-semibold text-gray-700"},"Sex"),e("th",{class:"px-4 py-3 text-left font-semibold text-gray-700"},"Class"),e("th",{class:"px-4 py-3 text-right font-semibold text-gray-700"},"Action")])],-1)),e("tbody",ro,[(l(!0),o(b,null,f(j.students.data,s=>(l(),o("tr",{key:s.reg_no,class:"hover:bg-gray-50"},[e("td",no,a(s.reg_no),1),e("td",io,a(s.name),1),e("td",uo,[e("span",vo,a(s.sex),1)]),e("td",xo,a(s.class_name),1),e("td",go,[e("div",mo,[e("button",{type:"button",onClick:A(m=>z(s),["stop"]),class:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-indigo-50 text-indigo-600 ring-1 ring-inset ring-indigo-200 hover:bg-indigo-100","aria-label":"View"},[...t[105]||(t[105]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12s3.75-7.5 9.75-7.5S21.75 12 21.75 12s-3.75 7.5-9.75 7.5S2.25 12 2.25 12z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 15a3 3 0 100-6 3 3 0 000 6z"})],-1)])],8,po),e("button",{type:"button",onClick:A(m=>z(s),["stop"]),class:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-sky-50 text-sky-600 ring-1 ring-inset ring-sky-200 hover:bg-sky-100","aria-label":"History"},[...t[106]||(t[106]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 12a9 9 0 109-9v2"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 3v6h6"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 7v5l3 3"})],-1)])],8,co),e("button",{type:"button",onClick:A(m=>ie(s),["stop"]),class:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-emerald-50 text-emerald-600 ring-1 ring-inset ring-emerald-200 hover:bg-emerald-100","aria-label":"Edit"},[...t[107]||(t[107]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 3.487a2.1 2.1 0 113 3L8.25 18.1 4.5 19.5l1.4-3.75 10.962-12.263z"})],-1)])],8,yo),e("button",{type:"button",onClick:A(m=>ne(s),["stop"]),class:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-rose-50 text-rose-600 ring-1 ring-inset ring-rose-200 hover:bg-rose-100","aria-label":"Delete"},[...t[108]||(t[108]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 7h12M9 7V5a2 2 0 012-2h2a2 2 0 012 2v2m-1 0l-.867 12.142A2 2 0 0114.138 21H9.862a2 2 0 01-1.995-1.858L7 7z"})],-1)])],8,bo)])])]))),128)),(j.students.data||[]).length===0?(l(),o("tr",fo,[...t[109]||(t[109]=[e("td",{colspan:"5",class:"px-4 py-8 text-center text-sm text-gray-500"},"No students found.",-1)])])):i("",!0)])]))])]),j.students.links?(l(),o("div",Xo,[e("div",Ao,"Showing "+a(j.students.from||0)+"-"+a(j.students.to||0)+" of "+a(j.students.total||0),1),e("div",Uo,[(l(!0),o(b,null,f(j.students.links,(s,m)=>(l(),o("button",{key:m,disabled:!s.url,onClick:d=>s.url&&R(s.url),class:F(["rounded-md px-3 py-1.5 text-sm",[s.active?"bg-green-600 text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50",s.url?"":"opacity-50"]]),innerHTML:s.label},null,10,Lo))),128))])])):i("",!0),H.value?(l(),o("div",Bo,[e("div",{class:"absolute inset-0 bg-black/40",onClick:t[42]||(t[42]=s=>H.value=!1)}),e("div",Eo,[e("div",zo,[t[116]||(t[116]=e("h3",{class:"text-base font-semibold text-gray-800"},"Add Student",-1)),e("button",{onClick:t[43]||(t[43]=s=>H.value=!1),class:"rounded-md p-1 text-gray-500 hover:bg-gray-100","aria-label":"Close"},[...t[115]||(t[115]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",No,[e("div",null,[t[117]||(t[117]=e("label",{class:"mb-1 block text-xs font-medium text-gray-600"},[v("Full Name "),e("span",{class:"text-red-600"},"*")],-1)),g(e("input",{"onUpdate:modelValue":t[44]||(t[44]=s=>x.value.name=s),required:"",type:"text",class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},null,512),[[M,x.value.name]]),y.value.name?(l(),o("p",Ho,a(y.value.name),1)):i("",!0)]),e("div",null,[t[119]||(t[119]=e("label",{class:"mb-1 block text-xs font-medium text-gray-600"},[v("Sex "),e("span",{class:"text-red-600"},"*")],-1)),g(e("select",{"onUpdate:modelValue":t[45]||(t[45]=s=>x.value.sex=s),required:"",class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},[...t[118]||(t[118]=[e("option",{value:"M"},"Male",-1),e("option",{value:"F"},"Female",-1)])],512),[[V,x.value.sex]]),y.value.sex?(l(),o("p",To,a(y.value.sex),1)):i("",!0)]),e("div",null,[t[121]||(t[121]=e("label",{class:"mb-1 block text-xs font-medium text-gray-600"},[v("Class "),e("span",{class:"text-red-600"},"*")],-1)),g(e("select",{"onUpdate:modelValue":t[46]||(t[46]=s=>x.value.class_name=s),required:"",class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},[t[120]||(t[120]=e("option",{value:"",disabled:""},"Select class",-1)),(l(!0),o(b,null,f(Xe.value,s=>(l(),o("option",{key:s,value:s},a(s),9,Io))),128))],512),[[V,x.value.class_name]]),y.value.class_name?(l(),o("p",Oo,a(y.value.class_name),1)):i("",!0)]),e("div",null,[t[122]||(t[122]=e("label",{class:"mb-1 block text-xs font-medium text-gray-600"},[v("Date of Birth "),e("span",{class:"text-red-600"},"*")],-1)),g(e("input",{"onUpdate:modelValue":t[47]||(t[47]=s=>x.value.dob=s),required:"",type:"date",class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},null,512),[[M,x.value.dob]]),y.value.dob?(l(),o("p",Po,a(y.value.dob),1)):i("",!0)]),e("div",null,[t[123]||(t[123]=e("label",{class:"mb-1 block text-xs font-medium text-gray-600"},[v("Academic Year "),e("span",{class:"text-red-600"},"*")],-1)),g(e("input",{"onUpdate:modelValue":t[48]||(t[48]=s=>x.value.academic_year=s),required:"",type:"number",min:"2000",max:"2100",class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},null,512),[[M,x.value.academic_year]]),y.value.academic_year?(l(),o("p",Wo,a(y.value.academic_year),1)):i("",!0)]),e("div",null,[t[124]||(t[124]=e("label",{class:"mb-1 block text-xs font-medium text-gray-600"},[v("Exam Number "),e("span",{class:"text-red-600"},"*")],-1)),e("div",Go,[e("span",Ko,a(S.value),1),g(e("input",{"onUpdate:modelValue":t[49]||(t[49]=s=>x.value.exam_no=s),required:"",onBlur:Ve,type:"text",placeholder:"e.g. 0011",class:"w-full rounded-r-md border border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},null,544),[[M,x.value.exam_no]])]),S.value?(l(),o("p",Yo,"Format: "+a(S.value)+"XXXX (e.g. "+a(S.value)+"0011)",1)):i("",!0),y.value.exam_no?(l(),o("p",Jo,a(y.value.exam_no),1)):i("",!0)]),e("div",Qo,[t[125]||(t[125]=e("label",{class:"mb-1 block text-xs font-medium text-gray-600"},"Photo",-1)),e("input",{type:"file",accept:"image/*",onChange:$e,class:"w-full rounded-md border border-gray-300 text-sm shadow-sm"},null,32)]),t[130]||(t[130]=e("div",{class:"sm:col-span-2 mt-2"},[e("div",{class:"text-sm font-semibold text-gray-800"},"Guardian Details")],-1)),e("div",null,[t[126]||(t[126]=e("label",{class:"mb-1 block text-xs font-medium text-gray-600"},[v("Guardian Name "),e("span",{class:"text-red-600"},"*")],-1)),g(e("input",{"onUpdate:modelValue":t[50]||(t[50]=s=>x.value.guardian_name=s),required:"",type:"text",class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},null,512),[[M,x.value.guardian_name]]),y.value.guardian_name?(l(),o("p",Zo,a(y.value.guardian_name),1)):i("",!0)]),e("div",null,[t[128]||(t[128]=e("label",{class:"mb-1 block text-xs font-medium text-gray-600"},[v("Relation "),e("span",{class:"text-red-600"},"*")],-1)),g(e("select",{"onUpdate:modelValue":t[51]||(t[51]=s=>x.value.guardian_relation=s),required:"",class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},[...t[127]||(t[127]=[e("option",{value:""},"Select",-1),e("option",{value:"Parent"},"Parent",-1),e("option",{value:"Mother"},"Mother",-1),e("option",{value:"Father"},"Father",-1),e("option",{value:"Guardian"},"Guardian",-1),e("option",{value:"Relative"},"Relative",-1)])],512),[[V,x.value.guardian_relation]]),y.value.guardian_relation?(l(),o("p",el,a(y.value.guardian_relation),1)):i("",!0)]),e("div",tl,[t[129]||(t[129]=e("label",{class:"mb-1 block text-xs font-medium text-gray-600"},[v("Guardian Phone "),e("span",{class:"text-red-600"},"*")],-1)),g(e("input",{"onUpdate:modelValue":t[52]||(t[52]=s=>x.value.guardian_phone=s),required:"",type:"tel",inputmode:"tel",placeholder:"2557########",class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},null,512),[[M,x.value.guardian_phone]]),y.value.guardian_phone?(l(),o("p",sl,a(y.value.guardian_phone),1)):i("",!0),W.value.count>0?(l(),o("div",ol,[v(" This guardian has "+a(W.value.count)+" student(s): ",1),e("ul",ll,[(l(!0),o(b,null,f(W.value.students,s=>(l(),o("li",{key:s.reg_no},a(s.reg_no)+" — "+a(s.name)+" ("+a(s.class_name)+")",1))),128))])])):i("",!0)])]),e("div",al,[e("button",{onClick:t[53]||(t[53]=s=>H.value=!1),type:"button",class:"rounded-md border border-gray-300 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"},"Cancel"),e("button",{disabled:ee.value,onClick:Fe,type:"button",class:"rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white hover:bg-green-700 disabled:opacity-60"},a(ee.value?"Saving...":"Save Student"),9,rl)])])])):i("",!0)])]),_:1})],64))}};export{il as default};
