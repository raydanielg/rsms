import{r as B,G as T,q as m,c as a,a as _,u as z,h as A,w,b as e,s as C,o as r,F as n,y as u,t as l,z as L,e as c,m as g,p as v,k as V}from"./app-B6qV5A7i.js";import{_ as G}from"./AuthenticatedLayout-CIuSAw6o.js";const P={class:"space-y-6"},R={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},D={class:"flex items-center gap-2"},F=["value"],$={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-5"},O={class:"rounded-xl border border-green-100 bg-white p-4 shadow-sm"},Y={class:"flex items-center justify-between"},q={class:"mt-1 text-2xl font-semibold text-gray-900"},E={class:"rounded-xl border border-blue-100 bg-white p-4 shadow-sm"},H={class:"flex items-center justify-between"},U={class:"mt-1 text-2xl font-semibold text-gray-900"},I={class:"rounded-xl border border-yellow-100 bg-white p-4 shadow-sm"},J={class:"flex items-center justify-between"},K={class:"mt-1 text-2xl font-semibold text-gray-900"},Q={class:"rounded-xl border border-purple-100 bg-white p-4 shadow-sm"},W={class:"flex items-center justify-between"},X={class:"mt-1 text-2xl font-semibold text-gray-900"},Z={class:"rounded-xl border border-rose-100 bg-white p-4 shadow-sm"},ee={class:"flex items-center justify-between"},se={class:"mt-1 text-2xl font-semibold text-gray-900"},te={class:"grid gap-4 lg:grid-cols-3"},le={class:"space-y-4 lg:col-span-2"},oe={class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},de={class:"mb-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},ae={class:"text-xs text-gray-500"},re={class:"flex flex-wrap items-center gap-3 text-xs text-gray-500"},ne={class:"inline-flex items-center gap-1"},ie={class:"inline-flex items-center gap-1"},ue={class:"grid gap-6 sm:grid-cols-2"},ce={class:"flex items-center gap-4"},xe={class:"mt-2 space-y-1 text-sm"},ge={class:"flex items-center gap-2"},ve={class:"flex items-center gap-2"},me={class:"flex items-center gap-4"},pe={class:"mt-2 space-y-1 text-sm text-gray-700"},be={class:"mt-6"},he={class:"mt-3 grid gap-4 sm:grid-cols-2"},ye={class:"space-y-1 text-sm text-gray-700"},fe={class:"font-semibold text-gray-900"},_e={class:"flex items-center gap-2"},we={class:"flex items-center gap-2"},ke={key:0,class:"col-span-full rounded-lg border border-dashed p-4 text-sm text-gray-500"},je={class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},Me={class:"space-y-3"},Ne={class:"text-sm text-gray-800"},Se={class:"text-xs text-gray-500"},Be={key:0,class:"text-xs text-gray-500"},Te={class:"space-y-4"},ze={class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},Ae={class:"mb-4 flex items-center justify-between"},Ce={class:"text-xs text-gray-500"},Le={class:"space-y-2"},Ve={class:"w-32 truncate text-xs text-gray-700"},Ge={class:"h-3 w-full rounded bg-gray-100"},Pe={class:"w-10 text-right text-xs text-gray-700"},Re={key:0,class:"text-xs text-gray-500"},De={class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},Fe={class:"mb-4 flex items-center justify-between"},$e={class:"text-xs text-gray-500"},Oe={class:"space-y-2"},Ye={class:"w-32 truncate text-xs text-gray-700"},qe={class:"h-3 w-full rounded bg-gray-100"},Ee={class:"w-10 text-right text-xs text-gray-700"},He={key:0,class:"text-xs text-gray-500"},Ue={class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},Ie={class:"space-y-2"},Je={class:"w-24 text-xs font-medium text-gray-700"},Ke={class:"h-3 w-full rounded bg-gray-100"},Qe={class:"w-10 text-right text-xs text-gray-700"},We={key:0,class:"text-xs text-gray-500"},es={__name:"Dashboard",props:{selected_year:{type:Number,required:!0},years:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({})},results:{type:Object,default:()=>({pass:0,fail:0,total_marks:0})},activities:{type:Array,default:()=>[]},charts:{type:Object,default:()=>({teachers:[],subjects:[],gender:[]})}},setup(k){const o=k,x=B(o.selected_year);function j(){V.get(route("dashboard"),{year:x.value},{preserveState:!0,replace:!0})}T(()=>o.selected_year,d=>{d!=null&&(x.value=d)});function M(d,s){const t=Math.max(1,Number(d)+Number(s)),i=Math.round(Number(d)/t*360);return{background:`conic-gradient(#16a34a 0deg ${i}deg, #ef4444 ${i}deg 360deg)`}}const p=m(()=>(o.charts.teachers||[]).map((d,s)=>({label:d.name,value:d.pass_rate,idx:s}))),b=m(()=>(o.charts.subjects||[]).map((d,s)=>({label:d.name,value:d.avg,idx:s}))),h=m(()=>(o.charts.gender||[]).map((d,s)=>({label:d.sex,value:d.pass_rate,idx:s}))),y=m(()=>o.charts.class_gender||[]);function N(d,s){const t=Number(d)||0,i=Number(s)||0,S=Math.max(1,t+i),f=Math.round(t/S*360);return{background:`conic-gradient(#60a5fa 0deg ${f}deg, #f472b6 ${f}deg 360deg)`}}return(d,s)=>(r(),a(n,null,[_(z(A),{title:"RSMS"}),_(G,null,{header:w(()=>[...s[1]||(s[1]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"RSMS",-1)])]),default:w(()=>[e("div",P,[e("div",R,[s[3]||(s[3]=e("div",{class:"text-sm text-gray-600"},"Overview",-1)),e("div",D,[s[2]||(s[2]=e("label",{for:"year",class:"text-sm text-gray-600"},"Year",-1)),C(e("select",{id:"year","onUpdate:modelValue":s[0]||(s[0]=t=>x.value=t),onChange:j,class:"rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},[(r(!0),a(n,null,u(o.years,t=>(r(),a("option",{key:t,value:t},l(t),9,F))),128))],544),[[L,x.value]])])]),e("div",$,[e("div",O,[e("div",Y,[e("div",null,[s[4]||(s[4]=e("div",{class:"text-sm text-gray-500"},"Total Students",-1)),e("div",q,l(o.stats.students),1)]),s[5]||(s[5]=e("div",{class:"rounded-lg bg-green-50 p-3 text-green-600"},[e("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 14l6.16-3.422A12.083 12.083 0 0112 21.5 12.083 12.083 0 015.84 10.578L12 14z"})])],-1))])]),e("div",E,[e("div",H,[e("div",null,[s[6]||(s[6]=e("div",{class:"text-sm text-gray-500"},"Total Teachers",-1)),e("div",U,l(o.stats.teachers),1)]),s[7]||(s[7]=e("div",{class:"rounded-lg bg-blue-50 p-3 text-blue-700"},[e("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.127a9.024 9.024 0 006 0V18a6 6 0 10-12 0v1.127a9.024 9.024 0 006 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 12a4 4 0 100-8 4 4 0 000 8z"})])],-1))])]),e("div",I,[e("div",J,[e("div",null,[s[8]||(s[8]=e("div",{class:"text-sm text-gray-500"},"Total Subjects",-1)),e("div",K,l(o.stats.subjects),1)]),s[9]||(s[9]=e("div",{class:"rounded-lg bg-yellow-50 p-3 text-yellow-700"},[e("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.253l7.071 4.084-7.07 4.084L4.93 10.337 12 6.253z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 14.421l7.5-4.329V18L12 22.5 4.5 18v-7.908L12 14.42z"})])],-1))])]),e("div",Q,[e("div",W,[e("div",null,[s[10]||(s[10]=e("div",{class:"text-sm text-gray-500"},"Total Classes",-1)),e("div",X,l(o.stats.classes),1)]),s[11]||(s[11]=e("div",{class:"rounded-lg bg-purple-50 p-3 text-purple-700"},[e("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7.5A1.5 1.5 0 014.5 6h15A1.5 1.5 0 0121 7.5v9A1.5 1.5 0 0119.5 18H4.5A1.5 1.5 0 013 16.5v-9z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 10h18"})])],-1))])]),e("div",Z,[e("div",ee,[e("div",null,[s[12]||(s[12]=e("div",{class:"text-sm text-gray-500"},"Total Parents",-1)),e("div",se,l(o.stats.parents),1)]),s[13]||(s[13]=e("div",{class:"rounded-lg bg-rose-50 p-3 text-rose-700"},[e("svg",{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 10-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 000-7.78z"})])],-1))])])]),e("div",te,[e("div",le,[e("div",oe,[e("div",de,[e("div",null,[s[14]||(s[14]=e("h3",{class:"text-base font-semibold text-gray-800"},"Results Analytics",-1)),e("div",ae,"Year "+l(x.value),1)]),e("div",re,[e("span",ne,[s[15]||(s[15]=e("span",{class:"inline-block h-2 w-2 rounded-full bg-emerald-500"},null,-1)),c(" Pass: "+l(o.results.pass)+"%",1)]),e("span",ie,[s[16]||(s[16]=e("span",{class:"inline-block h-2 w-2 rounded-full bg-red-500"},null,-1)),c(" Fail: "+l(o.results.fail)+"%",1)])])]),e("div",ue,[e("div",ce,[e("div",{class:"h-28 w-28 flex-none rounded-full",style:g(M(o.results.pass,o.results.fail))},null,4),e("div",null,[s[19]||(s[19]=e("div",{class:"text-sm font-medium text-gray-800"},"Pass/Fail",-1)),e("div",xe,[e("div",ge,[s[17]||(s[17]=e("span",{class:"inline-block h-2 w-2 rounded-full bg-emerald-500"},null,-1)),c(" Pass: "+l(o.results.pass)+"%",1)]),e("div",ve,[s[18]||(s[18]=e("span",{class:"inline-block h-2 w-2 rounded-full bg-red-500"},null,-1)),c(" Fail: "+l(o.results.fail)+"%",1)])])])]),e("div",me,[e("div",null,[s[20]||(s[20]=e("div",{class:"text-sm font-medium text-gray-800"},"Totals",-1)),e("div",pe,[e("div",null,"Total marks counted: "+l(o.results.total_marks),1)])])])]),e("div",be,[s[23]||(s[23]=e("div",{class:"text-sm font-medium text-gray-800"},"Gender per class",-1)),e("div",he,[(r(!0),a(n,null,u(y.value,t=>(r(),a("div",{key:t.class,class:"flex items-center gap-4 rounded-lg border border-gray-100 p-3"},[e("div",{class:"h-20 w-20 flex-none rounded-full",style:g(N(t.male,t.female))},null,4),e("div",ye,[e("div",fe,l(t.class),1),e("div",_e,[s[21]||(s[21]=e("span",{class:"inline-block h-2 w-2 rounded-full bg-blue-400"},null,-1)),c(" Boys: "+l(t.male),1)]),e("div",we,[s[22]||(s[22]=e("span",{class:"inline-block h-2 w-2 rounded-full bg-pink-400"},null,-1)),c(" Girls: "+l(t.female),1)])])]))),128)),y.value.length?v("",!0):(r(),a("div",ke,"No class gender data yet."))])])]),e("div",je,[s[25]||(s[25]=e("div",{class:"mb-4 flex items-center justify-between"},[e("h3",{class:"text-base font-semibold text-gray-800"},"Recent Activity")],-1)),e("ul",Me,[(r(!0),a(n,null,u(o.activities,(t,i)=>(r(),a("li",{key:i,class:"flex items-start gap-3"},[s[24]||(s[24]=e("span",{class:"mt-1 inline-block h-2 w-2 flex-none rounded-full bg-green-600"},null,-1)),e("div",null,[e("div",Ne,l(t.text),1),e("div",Se,l(t.meta),1)])]))),128)),!o.activities||o.activities.length===0?(r(),a("li",Be,"No recent activity.")):v("",!0)])])]),e("div",Te,[e("div",ze,[e("div",Ae,[s[26]||(s[26]=e("h3",{class:"text-base font-semibold text-gray-800"},"Teacher Pass Rate",-1)),e("div",Ce,"Top "+l(p.value.length),1)]),e("div",Le,[(r(!0),a(n,null,u(p.value,t=>(r(),a("div",{key:t.idx,class:"flex items-center gap-3"},[e("div",Ve,l(t.label),1),e("div",Ge,[e("div",{class:"h-3 rounded bg-emerald-500",style:g({width:Math.min(100,t.value)+"%"})},null,4)]),e("div",Pe,l(t.value)+"%",1)]))),128)),p.value.length===0?(r(),a("div",Re,"No data.")):v("",!0)])]),e("div",De,[e("div",Fe,[s[27]||(s[27]=e("h3",{class:"text-base font-semibold text-gray-800"},"Subject Average",-1)),e("div",$e,"Top "+l(b.value.length),1)]),e("div",Oe,[(r(!0),a(n,null,u(b.value,t=>(r(),a("div",{key:t.idx,class:"flex items-center gap-3"},[e("div",Ye,l(t.label),1),e("div",qe,[e("div",{class:"h-3 rounded bg-blue-500",style:g({width:Math.min(100,t.value)+"%"})},null,4)]),e("div",Ee,l(t.value),1)]))),128)),b.value.length===0?(r(),a("div",He,"No data.")):v("",!0)])]),e("div",Ue,[s[28]||(s[28]=e("div",{class:"mb-4 flex items-center justify-between"},[e("h3",{class:"text-base font-semibold text-gray-800"},"Gender Pass Rate")],-1)),e("div",Ie,[(r(!0),a(n,null,u(h.value,t=>(r(),a("div",{key:t.idx,class:"flex items-center gap-3"},[e("div",Je,l(t.label),1),e("div",Ke,[e("div",{class:"h-3 rounded bg-purple-500",style:g({width:Math.min(100,t.value)+"%"})},null,4)]),e("div",Qe,l(t.value)+"%",1)]))),128)),h.value.length===0?(r(),a("div",We,"No data.")):v("",!0)])])])])])]),_:1})],64))}};export{es as default};
