import{f as b,r as v,g as V,w as h,a as o,b as r,u as s,h as x,i as U,c as n,p as g,o as t,s as C,F as q,y as S,t as P,z as $,l as M,e as y,n as T,A as B}from"./app-BJQxAt22.js";import{_ as N}from"./GuestLayout-Bdmy0t30.js";import{_ as u,a as c,b as d}from"./TextInput-DrSZF2S8.js";import{P as D}from"./PrimaryButton-B3QYHvfY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"mt-4"},F={key:0,class:"mt-1 text-sm"},I={key:0,class:"text-gray-500"},R={key:1,class:"text-green-600"},z={key:2,class:"text-red-600"},A={class:"mt-4"},j=["value"],K={class:"mt-4"},L={key:0,class:"mt-1 text-sm"},G={key:0,class:"text-gray-500"},H={key:1,class:"text-green-600"},J={key:2,class:"text-red-600"},O={class:"mt-4"},Q={class:"mt-4"},W={key:0,class:"mt-1 text-sm"},X={key:0,class:"text-gray-500"},Y={key:1,class:"text-green-600"},Z={key:2,class:"text-red-600"},ee={class:"mt-4"},se={key:0,class:"mt-1 text-sm"},ae={key:0,class:"text-gray-500"},oe={key:1,class:"text-green-600"},le={key:2,class:"text-red-600"},te={class:"mt-4"},ne={class:"mt-4"},re={class:"mt-4 flex items-center justify-end"},_e={__name:"Register",setup(me){const e=b({name:"",phone:"",region:"",school_name:"",school_number:"",username:"",email:"",password:"",password_confirmation:""}),k=v(["Dar es Salaam","Dodoma","Arusha","Mwanza","Kilimanjaro","Mbeya","Morogoro","Tanga","Mtwara","Pwani","Tabora"]),m=v({email:null,phone:null,username:null,school_name:null}),p=v({email:!1,phone:!1,username:!1,school_name:!1});let f={};function _(i,a){f[i]&&clearTimeout(f[i]),m.value[i]=null,a&&(p.value[i]=!0,f[i]=setTimeout(async()=>{try{const{data:l}=await B.get(route("register.availability"),{params:{field:i,value:a}});m.value[i]=l.available}catch{m.value[i]=null}finally{p.value[i]=!1}},400))}const w=()=>{e.post(route("register"),{onFinish:()=>e.reset("password","password_confirmation")})};return(i,a)=>(t(),V(N,null,{default:h(()=>[o(s(x),{title:"Register"}),r("form",{onSubmit:U(w,["prevent"])},[r("div",null,[o(u,{for:"name",value:"Name"}),o(c,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:s(e).name,"onUpdate:modelValue":a[0]||(a[0]=l=>s(e).name=l),required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),o(d,{class:"mt-2",message:s(e).errors.name},null,8,["message"])]),r("div",E,[o(u,{for:"phone",value:"Phone number"}),o(c,{id:"phone",type:"tel",class:"mt-1 block w-full",modelValue:s(e).phone,"onUpdate:modelValue":a[1]||(a[1]=l=>s(e).phone=l),required:"",autocomplete:"tel",onInput:a[2]||(a[2]=l=>_("phone",s(e).phone))},null,8,["modelValue"]),o(d,{class:"mt-2",message:s(e).errors.phone},null,8,["message"]),s(e).phone&&m.value.phone!==null?(t(),n("div",F,[p.value.phone?(t(),n("span",I,"Checking...")):m.value.phone?(t(),n("span",R,"Phone is available")):(t(),n("span",z,"Phone is already taken"))])):g("",!0)]),r("div",A,[o(u,{for:"region",value:"Region (Mkoa)"}),C(r("select",{id:"region",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500","onUpdate:modelValue":a[3]||(a[3]=l=>s(e).region=l),required:""},[a[13]||(a[13]=r("option",{value:"",disabled:""},"Select region",-1)),(t(!0),n(q,null,S(k.value,l=>(t(),n("option",{key:l,value:l},P(l),9,j))),128))],512),[[$,s(e).region]]),o(d,{class:"mt-2",message:s(e).errors.region},null,8,["message"])]),r("div",K,[o(u,{for:"school_name",value:"School name"}),o(c,{id:"school_name",type:"text",class:"mt-1 block w-full uppercase",modelValue:s(e).school_name,"onUpdate:modelValue":a[4]||(a[4]=l=>s(e).school_name=l),onInput:a[5]||(a[5]=l=>{s(e).school_name=s(e).school_name?.toUpperCase(),_("school_name",s(e).school_name)}),required:""},null,8,["modelValue"]),o(d,{class:"mt-2",message:s(e).errors.school_name},null,8,["message"]),s(e).school_name&&m.value.school_name!==null?(t(),n("div",L,[p.value.school_name?(t(),n("span",G,"Checking...")):m.value.school_name?(t(),n("span",H,"School name is available")):(t(),n("span",J,"School name is already registered"))])):g("",!0)]),r("div",O,[o(u,{for:"school_number",value:"School number"}),o(c,{id:"school_number",type:"text",class:"mt-1 block w-full",modelValue:s(e).school_number,"onUpdate:modelValue":a[6]||(a[6]=l=>s(e).school_number=l),required:""},null,8,["modelValue"]),o(d,{class:"mt-2",message:s(e).errors.school_number},null,8,["message"])]),r("div",Q,[o(u,{for:"username",value:"Username"}),o(c,{id:"username",type:"text",class:"mt-1 block w-full",modelValue:s(e).username,"onUpdate:modelValue":a[7]||(a[7]=l=>s(e).username=l),required:"",autocomplete:"username",onInput:a[8]||(a[8]=l=>_("username",s(e).username))},null,8,["modelValue"]),o(d,{class:"mt-2",message:s(e).errors.username},null,8,["message"]),s(e).username&&m.value.username!==null?(t(),n("div",W,[p.value.username?(t(),n("span",X,"Checking...")):m.value.username?(t(),n("span",Y,"Username is available")):(t(),n("span",Z,"Username is already taken"))])):g("",!0)]),r("div",ee,[o(u,{for:"email",value:"Email"}),o(c,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:s(e).email,"onUpdate:modelValue":a[9]||(a[9]=l=>s(e).email=l),required:"",autocomplete:"username",onInput:a[10]||(a[10]=l=>_("email",s(e).email))},null,8,["modelValue"]),o(d,{class:"mt-2",message:s(e).errors.email},null,8,["message"]),s(e).email&&m.value.email!==null?(t(),n("div",se,[p.value.email?(t(),n("span",ae,"Checking...")):m.value.email?(t(),n("span",oe,"Email is available")):(t(),n("span",le,"Email is already taken"))])):g("",!0)]),r("div",te,[o(u,{for:"password",value:"Password"}),o(c,{id:"password",type:"password",class:"mt-1 block w-full",modelValue:s(e).password,"onUpdate:modelValue":a[11]||(a[11]=l=>s(e).password=l),required:"",autocomplete:"new-password"},null,8,["modelValue"]),o(d,{class:"mt-2",message:s(e).errors.password},null,8,["message"])]),r("div",ne,[o(u,{for:"password_confirmation",value:"Confirm Password"}),o(c,{id:"password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:s(e).password_confirmation,"onUpdate:modelValue":a[12]||(a[12]=l=>s(e).password_confirmation=l),required:"",autocomplete:"new-password"},null,8,["modelValue"]),o(d,{class:"mt-2",message:s(e).errors.password_confirmation},null,8,["message"])]),r("div",re,[o(s(M),{href:i.route("login"),class:"rounded-md text-sm text-gray-600 underline hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},{default:h(()=>[...a[14]||(a[14]=[y(" Already registered? ",-1)])]),_:1},8,["href"]),o(D,{class:T(["ms-4",{"opacity-25":s(e).processing}]),disabled:s(e).processing},{default:h(()=>[...a[15]||(a[15]=[y(" Register ",-1)])]),_:1},8,["class","disabled"])])],32)]),_:1}))}};export{_e as default};
