import{_ as m}from"./AuthenticatedLayout-DmZHm018.js";import{r as n,j as p,c as r,a as b,u as h,h as _,w as g,b as s,p as v,o as d,e as f,t as e,F as y,y as w}from"./app-BJQxAt22.js";const j={class:"space-y-4"},k={key:0,class:"rounded-md border border-rose-200 bg-rose-50 p-3 text-sm text-rose-800"},R={class:"grid gap-3 sm:grid-cols-5"},S={class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},C={class:"mt-1 text-2xl font-semibold text-gray-800"},N={class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},q={class:"mt-1 text-2xl font-semibold text-gray-800"},F={class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},V={class:"mt-1 text-2xl font-semibold text-gray-800"},X={class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},B={class:"mt-1 text-2xl font-semibold text-gray-800"},E={class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},L={class:"mt-1 text-2xl font-semibold text-gray-800"},M={class:"overflow-hidden rounded-xl border border-gray-100 bg-white shadow-sm"},A={class:"overflow-x-auto"},H={class:"min-w-full divide-y divide-gray-200 text-sm"},W={class:"divide-y divide-gray-100"},D={class:"px-4 py-3 text-gray-900"},P={class:"px-4 py-3 text-gray-700"},T={key:0},I={__name:"School",setup($){const o=n({students:0,classes:0,subjects:0,exams:0,marks:0,avg_subjects_per_class:0}),c=n([]),x=n(!1),l=n("");async function u(){x.value=!0,l.value="";try{const[i,t]=await Promise.all([fetch(route("api.reports.school"),{headers:{"X-Requested-With":"XMLHttpRequest"}}),fetch(route("api.reports.classes"),{headers:{"X-Requested-With":"XMLHttpRequest"}})]);if(!i.ok||!t.ok)throw new Error("Failed");o.value=await i.json();const a=await t.json();c.value=a.classes||[]}catch{l.value="Failed to load school report."}finally{x.value=!1}}return p(u),(i,t)=>(d(),r(y,null,[b(h(_),{title:"School Report"}),b(m,null,{header:g(()=>[...t[0]||(t[0]=[s("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"School Report",-1)])]),default:g(()=>[s("div",j,[l.value?(d(),r("div",k,[f(e(l.value)+" ",1),s("button",{onClick:u,class:"ml-2 rounded border border-rose-300 px-2 py-0.5 text-rose-700 hover:bg-rose-100"},"Retry")])):v("",!0),s("div",R,[s("div",S,[t[1]||(t[1]=s("div",{class:"text-xs text-gray-500"},"Students",-1)),s("div",C,e(o.value.students),1)]),s("div",N,[t[2]||(t[2]=s("div",{class:"text-xs text-gray-500"},"Classes",-1)),s("div",q,e(o.value.classes),1)]),s("div",F,[t[3]||(t[3]=s("div",{class:"text-xs text-gray-500"},"Subjects",-1)),s("div",V,e(o.value.subjects),1)]),s("div",X,[t[4]||(t[4]=s("div",{class:"text-xs text-gray-500"},"Exams",-1)),s("div",B,e(o.value.exams),1)]),s("div",E,[t[5]||(t[5]=s("div",{class:"text-xs text-gray-500"},"Avg subjects/class",-1)),s("div",L,e(o.value.avg_subjects_per_class),1)])]),s("div",M,[t[8]||(t[8]=s("div",{class:"border-b bg-gray-50 px-4 py-2 text-sm font-semibold text-gray-700"},"Subjects per class",-1)),s("div",A,[s("table",H,[t[7]||(t[7]=s("thead",{class:"bg-gray-50"},[s("tr",null,[s("th",{class:"px-4 py-3 text-left font-semibold text-gray-700"},"Class"),s("th",{class:"px-4 py-3 text-left font-semibold text-gray-700"},"Assigned subjects")])],-1)),s("tbody",W,[(d(!0),r(y,null,w(c.value,a=>(d(),r("tr",{key:a.id,class:"hover:bg-gray-50"},[s("td",D,e(a.name),1),s("td",P,e(a.subjects),1)]))),128)),c.value.length===0?(d(),r("tr",T,[...t[6]||(t[6]=[s("td",{colspan:"2",class:"px-4 py-8 text-center text-sm text-gray-500"},"No data.",-1)])])):v("",!0)])])])])])]),_:1})],64))}};export{I as default};
