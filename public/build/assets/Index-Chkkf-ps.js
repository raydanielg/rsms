import{r as y,f as D,g as N,c as r,a as T,u as w,m as F,w as M,b as t,i as l,n as c,t as a,o,F as x,k as m,x as v,z as k,e as $,G as S}from"./app-BoWaoUwb.js";import{_ as U}from"./AuthenticatedLayout-CQFJTYU6.js";import"./DropdownLink-v00n1gGZ.js";const V={class:"flex items-center justify-between"},I={class:"text-xl font-semibold leading-tight text-gray-800"},E={class:"inline-flex overflow-hidden rounded-md border border-gray-200"},O={class:"space-y-4"},q={class:"rounded-xl border border-gray-100 bg-white p-2 shadow-sm"},B={class:"flex flex-wrap gap-2"},z={key:0,class:"space-y-3"},A={class:"flex items-center justify-between"},K={class:"text-base font-semibold text-gray-800"},P={class:"text-xs text-gray-500"},R={class:"mt-2 whitespace-pre-wrap text-sm text-gray-700"},G={key:0,class:"rounded-xl border border-dashed border-gray-200 bg-white p-6 text-center text-sm text-gray-500"},J={key:1,class:"flex justify-end gap-1"},W=["disabled","onClick","innerHTML"],Y={key:1,class:"space-y-3"},Q={class:"flex items-center justify-between"},X={class:"text-base font-semibold text-gray-800"},Z={class:"text-xs text-gray-500"},ee={class:"mt-2 whitespace-pre-wrap text-sm text-gray-700"},te={key:0,class:"rounded-xl border border-dashed border-gray-200 bg-white p-6 text-center text-sm text-gray-500"},se={key:1,class:"flex justify-end gap-1"},ae=["disabled","onClick","innerHTML"],ne={key:2,class:"space-y-3"},re={class:"flex items-center justify-between"},oe={class:"text-base font-semibold text-gray-800"},de={class:"text-xs text-gray-500"},le={class:"mt-2 whitespace-pre-wrap text-sm text-gray-700"},ie={class:"mt-3 flex items-center justify-between"},ue={class:"flex items-center gap-2 text-xs text-gray-600"},ce={class:"rounded-full bg-emerald-50 px-2 py-0.5 text-emerald-700"},be={class:"rounded-full bg-rose-50 px-2 py-0.5 text-rose-700"},ge={class:"flex gap-2"},xe=["disabled","onClick"],me=["disabled","onClick"],ve={key:0,class:"rounded-xl border border-dashed border-gray-200 bg-white p-6 text-center text-sm text-gray-500"},ye={key:1,class:"flex justify-end gap-1"},pe=["disabled","onClick","innerHTML"],he={key:3,class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},_e={class:"grid gap-4 sm:grid-cols-2"},we={class:"mb-1 block text-xs font-medium text-gray-600"},fe={key:0,class:"mt-1 text-xs text-red-600"},ke={class:"mb-1 block text-xs font-medium text-gray-600"},Se={class:"sm:col-span-2"},Ce={class:"mb-1 block text-xs font-medium text-gray-600"},je={key:0,class:"mt-1 text-xs text-red-600"},Te={class:"mt-3 flex justify-end"},Me=["disabled"],Ne={__name:"Index",props:{tab:{type:String,default:"announcements"},announcements:{type:Object,required:!0},policies:{type:Object,required:!0},updates:{type:Object,required:!0}},setup(d){const i=y(d.tab||"announcements"),s=y("en"),L=D(),p=N(()=>L.props.errors||{});function f(u){i.value=u,v.get(route("information.index"),{tab:u},{preserveScroll:!0,preserveState:!0,replace:!0})}const b=y({name:"",contact:"",message:""}),h=y(!1);async function H(){h.value=!0;try{await v.post(route("information.feedback.store"),b.value,{preserveScroll:!0,onSuccess:()=>{b.value={name:"",contact:"",message:""},window.__toast&&window.__toast("success",s.value==="en"?"Feedback sent":"Ujumbe umetumwa")},onError:u=>{const n=Object.values(u||{})[0]||"Failed";window.__toast&&window.__toast("error",String(n))}})}finally{h.value=!1}}const _=y({});async function C(u,n){_.value[u]=!0;try{await v.post(route("information.updates.react",{id:u}),{reaction:n},{preserveScroll:!0,onSuccess:()=>{window.__toast&&window.__toast("success",s.value==="en"?"Reaction recorded":"Maoni yamehifadhiwa")},onError:()=>{window.__toast&&window.__toast("error",s.value==="en"?"Failed":"Imeshindikana")}})}finally{_.value[u]=!1}}return(u,n)=>(o(),r(x,null,[T(w(F),{title:"Information"}),T(U,null,{header:M(()=>[t("div",V,[t("h2",I,a(s.value==="en"?"Information":"Taarifa"),1),t("div",E,[t("button",{class:c(["px-3 py-1 text-sm",s.value==="en"?"bg-green-600 text-white":"bg-white text-gray-700"]),onClick:n[0]||(n[0]=e=>s.value="en")},"EN",2),t("button",{class:c(["px-3 py-1 text-sm",s.value==="sw"?"bg-green-600 text-white":"bg-white text-gray-700"]),onClick:n[1]||(n[1]=e=>s.value="sw")},"SW",2)])])]),default:M(()=>[t("div",O,[t("div",q,[t("nav",B,[t("button",{type:"button",onClick:n[2]||(n[2]=e=>f("announcements")),class:c(["rounded-md px-3 py-2 text-sm",i.value==="announcements"?"bg-green-600 text-white":"text-gray-700 hover:bg-gray-50 border border-gray-200"])},a(s.value==="en"?"Announcements":"Taarifa"),3),t("button",{type:"button",onClick:n[3]||(n[3]=e=>f("policies")),class:c(["rounded-md px-3 py-2 text-sm",i.value==="policies"?"bg-green-600 text-white":"text-gray-700 hover:bg-gray-50 border border-gray-200"])},a(s.value==="en"?"Policies":"Sera"),3),t("button",{type:"button",onClick:n[4]||(n[4]=e=>f("updates")),class:c(["rounded-md px-3 py-2 text-sm",i.value==="updates"?"bg-green-600 text-white":"text-gray-700 hover:bg-gray-50 border border-gray-200"])},a(s.value==="en"?"Updates":"Maboresho"),3),t("button",{type:"button",onClick:n[5]||(n[5]=e=>i.value="feedback"),class:c(["rounded-md px-3 py-2 text-sm",i.value==="feedback"?"bg-green-600 text-white":"text-gray-700 hover:bg-gray-50 border border-gray-200"])},a(s.value==="en"?"Feedback":"Maoni"),3)])]),i.value==="announcements"?(o(),r("div",z,[(o(!0),r(x,null,m(d.announcements.data||[],e=>(o(),r("div",{key:e.id,class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},[t("div",A,[t("h3",K,a(s.value==="en"?e.title_en:e.title_sw),1),t("div",P,a(e.published_at?new Date(e.published_at).toLocaleDateString():""),1)]),t("p",R,a(s.value==="en"?e.content_en:e.content_sw),1)]))),128)),(d.announcements.data||[]).length===0?(o(),r("div",G,a(s.value==="en"?"No announcements yet.":"Hakuna taarifa kwa sasa."),1)):l("",!0),d.announcements.links?(o(),r("div",J,[(o(!0),r(x,null,m(d.announcements.links,(e,g)=>(o(),r("button",{key:g,disabled:!e.url,onClick:j=>e.url&&w(v).get(e.url,{},{preserveScroll:!0,preserveState:!0,replace:!0}),class:c(["rounded-md px-3 py-1.5 text-sm",[e.active?"bg-green-600 text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50",e.url?"":"opacity-50"]]),innerHTML:e.label},null,10,W))),128))])):l("",!0)])):l("",!0),i.value==="policies"?(o(),r("div",Y,[(o(!0),r(x,null,m(d.policies.data||[],e=>(o(),r("div",{key:e.id,class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},[t("div",Q,[t("h3",X,a(s.value==="en"?e.title_en:e.title_sw),1),t("div",Z,a(e.published_at?new Date(e.published_at).toLocaleDateString():""),1)]),t("p",ee,a(s.value==="en"?e.content_en:e.content_sw),1)]))),128)),(d.policies.data||[]).length===0?(o(),r("div",te,a(s.value==="en"?"No policies yet.":"Hakuna sera kwa sasa."),1)):l("",!0),d.policies.links?(o(),r("div",se,[(o(!0),r(x,null,m(d.policies.links,(e,g)=>(o(),r("button",{key:g,disabled:!e.url,onClick:j=>e.url&&w(v).get(e.url,{},{preserveScroll:!0,preserveState:!0,replace:!0}),class:c(["rounded-md px-3 py-1.5 text-sm",[e.active?"bg-green-600 text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50",e.url?"":"opacity-50"]]),innerHTML:e.label},null,10,ae))),128))])):l("",!0)])):l("",!0),i.value==="updates"?(o(),r("div",ne,[(o(!0),r(x,null,m(d.updates.data||[],e=>(o(),r("div",{key:e.id,class:"rounded-xl border border-gray-100 bg-white p-4 shadow-sm"},[t("div",re,[t("h3",oe,a(s.value==="en"?e.title_en:e.title_sw),1),t("div",de,a(e.published_at?new Date(e.published_at).toLocaleDateString():""),1)]),t("p",le,a(s.value==="en"?e.content_en:e.content_sw),1),t("div",ie,[t("div",ue,[t("span",ce,a(e.accepts_count||0)+" "+a(s.value==="en"?"accepted":"amekubali"),1),t("span",be,a(e.rejects_count||0)+" "+a(s.value==="en"?"rejected":"amekataa"),1)]),t("div",ge,[t("button",{disabled:_.value[e.id],onClick:g=>C(e.id,"accepted"),type:"button",class:"rounded-md bg-green-600 px-3 py-1.5 text-xs font-medium text-white hover:bg-green-700 disabled:opacity-60"},a(s.value==="en"?"Accept":"Kubali"),9,xe),t("button",{disabled:_.value[e.id],onClick:g=>C(e.id,"rejected"),type:"button",class:"rounded-md bg-rose-600 px-3 py-1.5 text-xs font-medium text-white hover:bg-rose-700 disabled:opacity-60"},a(s.value==="en"?"Reject":"Kataa"),9,me)])])]))),128)),(d.updates.data||[]).length===0?(o(),r("div",ve,a(s.value==="en"?"No updates yet.":"Hakuna maboresho kwa sasa."),1)):l("",!0),d.updates.links?(o(),r("div",ye,[(o(!0),r(x,null,m(d.updates.links,(e,g)=>(o(),r("button",{key:g,disabled:!e.url,onClick:j=>e.url&&w(v).get(e.url,{},{preserveScroll:!0,preserveState:!0,replace:!0}),class:c(["rounded-md px-3 py-1.5 text-sm",[e.active?"bg-green-600 text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50",e.url?"":"opacity-50"]]),innerHTML:e.label},null,10,pe))),128))])):l("",!0)])):l("",!0),i.value==="feedback"?(o(),r("div",he,[t("div",_e,[t("div",null,[t("label",we,[$(a(s.value==="en"?"Your name":"Jina lako")+" ",1),n[9]||(n[9]=t("span",{class:"text-red-600"},"*",-1))]),k(t("input",{"onUpdate:modelValue":n[6]||(n[6]=e=>b.value.name=e),type:"text",class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},null,512),[[S,b.value.name]]),p.value.name?(o(),r("p",fe,a(p.value.name),1)):l("",!0)]),t("div",null,[t("label",ke,a(s.value==="en"?"Contact (optional)":"Mawasiliano (hiari)"),1),k(t("input",{"onUpdate:modelValue":n[7]||(n[7]=e=>b.value.contact=e),type:"text",class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},null,512),[[S,b.value.contact]])]),t("div",Se,[t("label",Ce,[$(a(s.value==="en"?"Message":"Ujumbe")+" ",1),n[10]||(n[10]=t("span",{class:"text-red-600"},"*",-1))]),k(t("textarea",{"onUpdate:modelValue":n[8]||(n[8]=e=>b.value.message=e),rows:"4",class:"w-full rounded-md border-gray-300 text-sm shadow-sm focus:border-green-600 focus:ring-green-600"},null,512),[[S,b.value.message]]),p.value.message?(o(),r("p",je,a(p.value.message),1)):l("",!0)])]),t("div",Te,[t("button",{disabled:h.value,onClick:H,type:"button",class:"rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white hover:bg-green-700 disabled:opacity-60"},a(h.value?s.value==="en"?"Sending...":"Inatuma...":s.value==="en"?"Send feedback":"Tuma maoni"),9,Me)])])):l("",!0)])]),_:1})],64))}};export{Ne as default};
